<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="Sistema de gesti√≥n educativa - Liceo Exploradores de Sue√±os">
    <title>Liceo Exploradores de Sue√±os</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        'inter': ['Inter', 'sans-serif']
                    }
                }
            }
        }
    </script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        body { 
            font-family: 'Inter', sans-serif; 
            background: linear-gradient(135deg, #1e3a8a 0%, #3b82f6 50%, #90EE90 100%);
            min-height: 100vh;
        }
        .glass-effect {
            background: rgba(255, 255, 255, 0.25);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.18);
        }
        .card-hover {
            transition: all 0.3s ease;
        }
        .card-hover:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        }
        .btn-primary {
            background: linear-gradient(135deg, #1e3a8a, #3b82f6);
            transition: all 0.3s ease;
        }
        .btn-primary:hover {
            background: linear-gradient(135deg, #1e40af, #2563eb);
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.2);
        }
        .btn-success {
            background: linear-gradient(135deg, #90EE90, #32cd32);
        }
        .btn-success:hover {
            background: linear-gradient(135deg, #32cd32, #228b22);
            transform: translateY(-2px);
        }
        .btn-warning {
            background: linear-gradient(135deg, #FFD700, #FFA500);
        }
        .btn-warning:hover {
            background: linear-gradient(135deg, #FFA500, #FF8C00);
            transform: translateY(-2px);
        }
        .star-rating { display: flex; gap: 5px; justify-content: center; }
        .star { font-size: 28px; color: #e5e7eb; cursor: pointer; transition: all 0.2s; }
        .star.active { color: #fbbf24; text-shadow: 0 0 10px rgba(251, 191, 36, 0.5); }
        .star:hover { color: #fbbf24; transform: scale(1.1); }
        .tab-button {
            transition: all 0.3s ease;
            border-bottom: 3px solid transparent;
        }
        .tab-button.active {
            background: linear-gradient(135deg, #1e3a8a, #3b82f6);
            color: white;
            border-bottom-color: #FFD700;
        }
        .grade-excellent { background: linear-gradient(135deg, #90EE90, #32cd32); }
        .grade-good { background: linear-gradient(135deg, #1e3a8a, #3b82f6); }
        .grade-average { background: linear-gradient(135deg, #FFD700, #FFA500); }
        .grade-poor { background: linear-gradient(135deg, #dc2626, #b91c1c); }
        .floating-animation {
            animation: float 6s ease-in-out infinite;
        }
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-20px); }
        }
        .pulse-animation {
            animation: pulse 2s infinite;
        }
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="glass-effect shadow-2xl sticky top-0 z-40">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <div class="w-16 h-16 bg-gradient-to-br from-FFD700 to-FFA500 rounded-full flex items-center justify-center shadow-lg floating-animation" style="background: linear-gradient(135deg, #FFD700, #FFA500);">
                        <i class="fas fa-graduation-cap text-white text-2xl"></i>
                    </div>
                    <div>
                        <h1 class="text-3xl font-bold text-white drop-shadow-lg">Liceo Exploradores de Sue√±os</h1>
                        <p class="text-white/80 font-medium">‚ú® 17 a√±os educando con excelencia ‚ú®</p>
                    </div>
                </div>
                <div class="flex items-center space-x-6">
                    <div class="text-right text-white space-y-2">
                        <a href="https://maps.google.com/?q=Carrera+13+848+Villa+Gorgona+Candelaria" target="_blank" class="flex items-center text-sm font-medium hover:text-yellow-300 transition-colors cursor-pointer">
                            <i class="fas fa-map-marker-alt mr-2"></i>Carrera 13 #848, Villa Gorgona, Candelaria
                        </a>
                        <a href="https://wa.me/573135649661?text=Hola,%20me%20interesa%20informaci√≥n%20sobre%20el%20Liceo%20Exploradores%20de%20Sue√±os" target="_blank" class="flex items-center text-sm font-medium hover:text-green-300 transition-colors cursor-pointer">
                            <i class="fab fa-whatsapp mr-2"></i>WhatsApp: 313-564-9661
                        </a>
                    </div>
                    <div class="flex space-x-4">
                        <button id="testButton" onclick="testFunctionality()" class="bg-green-500 hover:bg-green-600 text-white px-8 py-3 rounded-full font-bold shadow-lg text-lg pulse-animation border-2 border-white transform hover:scale-105 transition-all">
                            üîç TEST
                        </button>
                        <button id="loginButton" onclick="showLogin()" class="btn-primary text-white px-8 py-3 rounded-full font-semibold shadow-lg hover:scale-105 transition-transform">
                            <i class="fas fa-sign-in-alt mr-2"></i>Iniciar Sesi√≥n
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container mx-auto px-6 py-12">
        <!-- Welcome Section -->
        <div id="welcomeSection" class="text-center">
            <div class="glass-effect p-12 rounded-3xl text-white mb-12 shadow-2xl">
                <h2 class="text-5xl font-bold mb-6 pulse-animation">¬°Bienvenidos a Nuestro Liceo!</h2>
                <p class="text-2xl mb-4">üéì Educaci√≥n de calidad desde Jard√≠n hasta Quinto Grado</p>
                <p class="text-xl opacity-90">Formando el futuro de nuestra comunidad con amor y dedicaci√≥n</p>
            </div>
            
            <div class="grid md:grid-cols-3 gap-8 mb-12">
                <div class="bg-white/95 backdrop-blur-sm p-8 rounded-2xl shadow-xl card-hover">
                    <div class="w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-6 shadow-lg" style="background: linear-gradient(135deg, #90EE90, #32cd32);">
                        <i class="fas fa-users text-white text-3xl"></i>
                    </div>
                    <h3 class="text-2xl font-bold text-gray-800 mb-4">Para Padres</h3>
                    <p class="text-gray-600 mb-6 leading-relaxed">Consulta las notas de tu hijo de manera f√°cil y r√°pida ingresando su n√∫mero de identidad</p>
                    <button id="parentAccessButton" onclick="showParentAccess()" class="btn-success text-white px-8 py-3 rounded-full font-semibold w-full shadow-lg">
                        <i class="fas fa-search mr-2"></i>Consultar Notas
                    </button>
                    <div class="mt-4 text-center">
                        <a href="https://wa.me/573135649661?text=Hola,%20necesito%20informaci√≥n%20sobre%20las%20notas%20de%20mi%20hijo" target="_blank" class="text-green-600 hover:text-green-800 text-sm font-medium">
                            <i class="fab fa-whatsapp mr-1"></i>Contactar por WhatsApp
                        </a>
                    </div>
                </div>
                <div class="bg-white/95 backdrop-blur-sm p-8 rounded-2xl shadow-xl card-hover">
                    <div class="w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-6 shadow-lg" style="background: linear-gradient(135deg, #FFD700, #FFA500);">
                        <i class="fas fa-chalkboard-teacher text-white text-3xl"></i>
                    </div>
                    <h3 class="text-2xl font-bold text-gray-800 mb-4">Para Profesores</h3>
                    <p class="text-gray-600 mb-6 leading-relaxed">Gestiona estudiantes y calificaciones con herramientas intuitivas y profesionales</p>
                    <button id="teacherLoginButton" onclick="showTeacherLogin()" class="btn-warning text-white px-8 py-3 rounded-full font-semibold w-full shadow-lg">
                        <i class="fas fa-user-tie mr-2"></i>Panel Docente
                    </button>
                    <div class="mt-4 text-center">
                        <a href="https://wa.me/573135649661?text=Hola,%20soy%20profesor%20y%20necesito%20ayuda%20con%20el%20sistema" target="_blank" class="text-yellow-600 hover:text-yellow-800 text-sm font-medium">
                            <i class="fab fa-whatsapp mr-1"></i>Soporte T√©cnico
                        </a>
                    </div>
                </div>
                <div class="bg-white/95 backdrop-blur-sm p-8 rounded-2xl shadow-xl card-hover">
                    <div class="w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-6 shadow-lg" style="background: linear-gradient(135deg, #1e3a8a, #3b82f6);">
                        <i class="fas fa-cog text-white text-3xl"></i>
                    </div>
                    <h3 class="text-2xl font-bold text-gray-800 mb-4">Administraci√≥n</h3>
                    <p class="text-gray-600 mb-6 leading-relaxed">Panel de control completo para la gesti√≥n integral del sistema educativo</p>
                    <button id="adminLoginButton" onclick="showAdminLogin()" class="btn-primary text-white px-8 py-3 rounded-full font-semibold w-full shadow-lg">
                        <i class="fas fa-shield-alt mr-2"></i>Administrar
                    </button>
                    <div class="mt-4 text-center">
                        <a href="https://wa.me/573135649661?text=Hola,%20me%20interesa%20informaci√≥n%20sobre%20inscripciones%20y%20admisiones%20al%20Liceo%20Exploradores%20de%20Sue√±os" target="_blank" class="text-blue-600 hover:text-blue-800 text-sm font-medium">
                            <i class="fab fa-whatsapp mr-1"></i>Inscripciones e Informaci√≥n
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <!-- Login Modal -->
        <div id="loginModal" class="hidden fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50">
            <div class="bg-white/95 backdrop-blur-sm p-10 rounded-3xl max-w-md w-full mx-4 shadow-2xl">
                <div class="flex justify-between items-center mb-8">
                    <h3 id="loginTitle" class="text-3xl font-bold text-gray-800">Iniciar Sesi√≥n</h3>
                    <button id="closeLoginButton" onclick="closeLogin()" class="text-gray-500 hover:text-gray-700 text-3xl transition-colors">&times;</button>
                </div>
                <form id="loginForm">
                    <div class="mb-6">
                        <label class="block text-gray-700 text-sm font-semibold mb-3">
                            <i class="fas fa-id-card mr-2"></i>N√∫mero de C√©dula
                        </label>
                        <input type="text" id="cedula" class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:border-blue-500 transition-colors" required>
                    </div>
                    <div class="mb-8">
                        <label class="block text-gray-700 text-sm font-semibold mb-3">
                            <i class="fas fa-lock mr-2"></i>Contrase√±a
                        </label>
                        <input type="password" id="password" class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:border-blue-500 transition-colors" required>
                    </div>
                    <button type="submit" id="submitLoginButton" class="w-full btn-primary text-white py-3 rounded-xl font-semibold shadow-lg">
                        <i class="fas fa-sign-in-alt mr-2"></i>Ingresar
                    </button>
                </form>
                <div id="registerSection" class="hidden mt-6">
                    <div class="border-t pt-6">
                        <p class="text-center text-gray-600 mb-4 font-medium">¬øPrimera vez? Reg√≠strate aqu√≠</p>
                        <button id="registerButton" onclick="showRegister()" class="w-full btn-success text-white py-3 rounded-xl font-semibold shadow-lg">
                            <i class="fas fa-user-plus mr-2"></i>Crear Cuenta
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Parent Access Modal -->
        <div id="parentModal" class="hidden fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50">
            <div class="bg-white/95 backdrop-blur-sm p-10 rounded-3xl max-w-md w-full mx-4 shadow-2xl">
                <div class="flex justify-between items-center mb-8">
                    <h3 class="text-3xl font-bold text-gray-800">
                        <i class="fas fa-search text-green-500 mr-3"></i>Consultar Notas
                    </h3>
                    <button id="closeParentModalButton" onclick="closeParentModal()" class="text-gray-500 hover:text-gray-700 text-3xl transition-colors">&times;</button>
                </div>
                <form id="parentForm">
                    <div class="mb-8">
                        <label class="block text-gray-700 text-sm font-semibold mb-3">
                            <i class="fas fa-student mr-2"></i>N√∫mero de Identidad del Estudiante
                        </label>
                        <input type="text" id="studentId" class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:border-green-500 transition-colors" required placeholder="Ingresa el n√∫mero de identidad">
                    </div>
                    <button type="submit" class="w-full btn-success text-white py-3 rounded-xl font-semibold shadow-lg">
                        <i class="fas fa-search mr-2"></i>Consultar Notas
                    </button>
                </form>
            </div>
        </div>

        <!-- Admin Dashboard -->
        <div id="adminDashboard" class="hidden">
            <div class="flex justify-between items-center mb-8">
                <h2 class="text-4xl font-bold text-white drop-shadow-lg">
                    <i class="fas fa-shield-alt mr-3"></i>Panel de Administraci√≥n
                </h2>
                <button id="logoutButton" onclick="logout()" class="bg-red-500 hover:bg-red-600 text-white px-6 py-3 rounded-full font-semibold shadow-lg transition-all">
                    <i class="fas fa-sign-out-alt mr-2"></i>Cerrar Sesi√≥n
                </button>
            </div>
            
            <!-- Admin Tabs -->
            <div class="bg-white/95 backdrop-blur-sm rounded-3xl shadow-2xl overflow-hidden">
                <div class="flex border-b">
                    <button id="scheduleTab" class="tab-button flex-1 px-6 py-4 font-semibold">
                        <i class="fas fa-calendar-alt mr-2"></i>Cronograma
                    </button>
                    <button id="eventsTab" class="tab-button flex-1 px-6 py-4 font-semibold">
                        <i class="fas fa-calendar-check mr-2"></i>Eventos
                    </button>
                    <button id="ratingsTab" class="tab-button flex-1 px-6 py-4 font-semibold">
                        <i class="fas fa-star mr-2"></i>Calificaciones
                    </button>
                </div>
                
                <div class="p-8">
                    <div id="scheduleContent" class="admin-tab-content">
                        <h3 class="text-2xl font-bold mb-6"><i class="fas fa-edit mr-2"></i>Gesti√≥n de Cronograma</h3>
                        <textarea id="schedule" class="w-full h-40 p-4 border-2 border-gray-200 rounded-xl focus:outline-none focus:border-blue-500 transition-colors" placeholder="Editar cronograma escolar..."></textarea>
                        <button id="saveScheduleButton" class="mt-4 btn-primary text-white px-6 py-3 rounded-xl font-semibold shadow-lg">
                            <i class="fas fa-save mr-2"></i>Guardar Cronograma
                        </button>
                    </div>
                    
                    <div id="eventsContent" class="admin-tab-content hidden">
                        <h3 class="text-2xl font-bold mb-6"><i class="fas fa-plus mr-2"></i>Agregar Evento</h3>
                        <div class="grid md:grid-cols-2 gap-4 mb-6">
                            <input type="date" id="eventDate" class="p-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:border-blue-500 transition-colors">
                            <input type="text" id="eventName" class="p-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:border-blue-500 transition-colors" placeholder="Nombre del evento">
                        </div>
                        <button id="addEventButton" class="btn-warning text-white px-6 py-3 rounded-xl font-semibold shadow-lg mb-6">
                            <i class="fas fa-plus mr-2"></i>Agregar Evento
                        </button>
                        <div id="eventsList" class="space-y-3"></div>
                    </div>
                    
                    <div id="ratingsContent" class="admin-tab-content hidden">
                        <h3 class="text-2xl font-bold mb-6"><i class="fas fa-chart-bar mr-2"></i>Calificaciones de Padres</h3>
                        <div id="parentRatings"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Teacher Dashboard -->
        <div id="teacherDashboard" class="hidden">
            <div class="flex justify-between items-center mb-8">
                <h2 class="text-4xl font-bold text-white drop-shadow-lg">
                    <i class="fas fa-chalkboard-teacher mr-3"></i>Panel de Profesores
                </h2>
                <button id="teacherLogoutButton" onclick="logout()" class="bg-red-500 hover:bg-red-600 text-white px-6 py-3 rounded-full font-semibold shadow-lg transition-all">
                    <i class="fas fa-sign-out-alt mr-2"></i>Cerrar Sesi√≥n
                </button>
            </div>
            
            <!-- Teacher Tabs -->
            <div class="bg-white/95 backdrop-blur-sm rounded-3xl shadow-2xl overflow-hidden">
                <div class="flex border-b">
                    <button id="studentsTab" class="tab-button flex-1 px-6 py-4 font-semibold">
                        <i class="fas fa-user-plus mr-2"></i>Agregar Estudiante
                    </button>
                    <button id="gradesTab" class="tab-button flex-1 px-6 py-4 font-semibold">
                        <i class="fas fa-clipboard-list mr-2"></i>Subir Notas
                    </button>
                    <button id="listTab" class="tab-button flex-1 px-6 py-4 font-semibold">
                        <i class="fas fa-list mr-2"></i>Lista Estudiantes
                    </button>
                </div>
                
                <div class="p-8">
                    <div id="studentsContent" class="teacher-tab-content">
                        <h3 class="text-2xl font-bold mb-6"><i class="fas fa-user-plus mr-2"></i>Agregar Nuevo Estudiante</h3>
                        <div class="grid md:grid-cols-2 gap-6">
                            <input type="text" id="newStudentId" class="p-4 border-2 border-gray-200 rounded-xl focus:outline-none focus:border-green-500 transition-colors" placeholder="N√∫mero de identidad">
                            <input type="text" id="newStudentName" class="p-4 border-2 border-gray-200 rounded-xl focus:outline-none focus:border-green-500 transition-colors" placeholder="Nombre completo">
                        </div>
                        <select id="newStudentGrade" class="w-full p-4 border-2 border-gray-200 rounded-xl focus:outline-none focus:border-green-500 transition-colors mt-4">
                            <option value="">Seleccionar grado</option>
                            <option value="Jard√≠n">üå± Jard√≠n</option>
                            <option value="Transici√≥n">üé® Transici√≥n</option>
                            <option value="Primero">1Ô∏è‚É£ Primero</option>
                            <option value="Segundo">2Ô∏è‚É£ Segundo</option>
                            <option value="Tercero">3Ô∏è‚É£ Tercero</option>
                            <option value="Cuarto">4Ô∏è‚É£ Cuarto</option>
                            <option value="Quinto">5Ô∏è‚É£ Quinto</option>
                        </select>
                        <button id="addStudentButton" class="w-full mt-6 btn-success text-white py-4 rounded-xl font-semibold shadow-lg">
                            <i class="fas fa-user-plus mr-2"></i>Agregar Estudiante
                        </button>
                    </div>
                    
                    <div id="gradesContent" class="teacher-tab-content hidden">
                        <h3 class="text-2xl font-bold mb-6"><i class="fas fa-clipboard-list mr-2"></i>Registrar Calificaci√≥n</h3>
                        <select id="gradeStudentSelect" class="w-full p-4 border-2 border-gray-200 rounded-xl focus:outline-none focus:border-blue-500 transition-colors mb-4">
                            <option value="">Seleccionar estudiante</option>
                        </select>
                        <div class="grid md:grid-cols-2 gap-4">
                            <input type="text" id="subject" class="p-4 border-2 border-gray-200 rounded-xl focus:outline-none focus:border-blue-500 transition-colors" placeholder="Materia">
                            <input type="number" id="grade" class="p-4 border-2 border-gray-200 rounded-xl focus:outline-none focus:border-blue-500 transition-colors" placeholder="Nota (1-5)" min="1" max="5" step="0.1">
                        </div>
                        <button id="addGradeButton" class="w-full mt-6 btn-primary text-white py-4 rounded-xl font-semibold shadow-lg">
                            <i class="fas fa-plus mr-2"></i>Registrar Nota
                        </button>
                    </div>
                    
                    <div id="listContent" class="teacher-tab-content hidden">
                        <h3 class="text-2xl font-bold mb-6"><i class="fas fa-list mr-2"></i>Estudiantes Registrados</h3>
                        <div id="studentsList" class="space-y-4"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Student Grades View -->
        <div id="studentGrades" class="hidden">
            <div class="flex justify-between items-center mb-8">
                <h2 class="text-4xl font-bold text-white drop-shadow-lg">
                    <i class="fas fa-graduation-cap mr-3"></i>Notas del Estudiante
                </h2>
                <button id="backToWelcomeButton" onclick="showWelcome()" class="bg-gray-500 hover:bg-gray-600 text-white px-6 py-3 rounded-full font-semibold shadow-lg transition-all">
                    <i class="fas fa-arrow-left mr-2"></i>Volver
                </button>
            </div>
            
            <div class="bg-white/95 backdrop-blur-sm p-8 rounded-3xl shadow-2xl mb-8">
                <div id="studentInfo"></div>
                <div id="gradesTable"></div>
            </div>
            
            <div class="bg-white/95 backdrop-blur-sm p-8 rounded-3xl shadow-2xl">
                <h3 class="text-2xl font-bold mb-6 text-center">
                    <i class="fas fa-star text-yellow-500 mr-2"></i>Calificar el Colegio
                </h3>
                <p class="text-center mb-6 text-gray-600 text-lg">¬øQu√© tal ha sido tu experiencia con el Liceo Exploradores de Sue√±os?</p>
                <div class="star-rating mb-6" id="starRating">
                    <span class="star" data-rating="1">‚òÖ</span>
                    <span class="star" data-rating="2">‚òÖ</span>
                    <span class="star" data-rating="3">‚òÖ</span>
                    <span class="star" data-rating="4">‚òÖ</span>
                    <span class="star" data-rating="5">‚òÖ</span>
                </div>
                <textarea id="ratingComment" class="w-full p-4 border-2 border-gray-200 rounded-xl focus:outline-none focus:border-yellow-500 transition-colors mb-6" rows="4" placeholder="Comparte tu opini√≥n sobre el colegio..."></textarea>
                <button id="submitRatingButton" class="w-full btn-warning text-white py-4 rounded-xl font-semibold shadow-lg">
                    <i class="fas fa-paper-plane mr-2"></i>Enviar Calificaci√≥n
                </button>
            </div>
        </div>
    </main>

    <script>
        // Data storage
        let currentUser = null;
        let currentUserType = null;
        let students = JSON.parse(localStorage.getItem('students')) || [];
        let grades = JSON.parse(localStorage.getItem('grades')) || [];
        let users = JSON.parse(localStorage.getItem('users')) || [];
        let events = JSON.parse(localStorage.getItem('events')) || [];
        let schedule = localStorage.getItem('schedule') || '';
        let ratings = JSON.parse(localStorage.getItem('ratings')) || [];
        let selectedRating = 0;

        // Test functionality for GitHub Pages
        function testFunctionality() {
            const tests = [
                { name: 'DOM Elements', test: () => document.getElementById('loginModal') !== null },
                { name: 'Local Storage', test: () => typeof(Storage) !== "undefined" },
                { name: 'Event Listeners', test: () => typeof showLogin === 'function' },
                { name: 'Data Arrays', test: () => Array.isArray(students) && Array.isArray(users) },
                { name: 'Buttons Working', test: () => document.getElementById('testButton') !== null }
            ];
            
            let results = 'üîç PRUEBA DE FUNCIONALIDAD:\n\n';
            let allPassed = true;
            
            tests.forEach(test => {
                try {
                    const passed = test.test();
                    results += ${passed ? '‚úÖ' : '‚ùå'} ${test.name}: ${passed ? 'OK' : 'FALLO'}\n;
                    if (!passed) allPassed = false;
                } catch (error) {
                    results += ‚ùå ${test.name}: ERROR - ${error.message}\n;
                    allPassed = false;
                }
            });
            
            results += \nüìä Estado: ${allPassed ? '‚úÖ SISTEMA FUNCIONAL' : '‚ö†Ô∏è PROBLEMAS DETECTADOS'};
            results += \nüì± Usuarios: ${users.length} | Estudiantes: ${students.length};
            results += \nüîë Admin: 12345678/admin123 | Profesor: 87654321/profesor123;
            results += \nüë®‚Äçüéì Estudiante prueba: 1001;
            
            alert(results);
            console.log('Test Results:', results);
        }

        // Initialize default admin user and sample data
        if (users.length === 0) {
            users.push({
                cedula: '12345678',
                password: 'admin123',
                type: 'admin',
                name: 'Administrador'
            });
            
            // Add sample teacher for testing
            users.push({
                cedula: '87654321',
                password: 'profesor123',
                type: 'teacher',
                name: 'Profesor de Prueba'
            });
            
            localStorage.setItem('users', JSON.stringify(users));
        }

        // Add sample students for testing
        if (students.length === 0) {
            students = [
                { id: '1001', name: 'Ana Mar√≠a Garc√≠a', grade: 'Tercero' },
                { id: '1002', name: 'Carlos Rodr√≠guez', grade: 'Quinto' },
                { id: '1003', name: 'Sof√≠a L√≥pez', grade: 'Segundo' }
            ];
            localStorage.setItem('students', JSON.stringify(students));
        }

        // Add sample grades for testing
        if (grades.length === 0) {
            grades = [
                { studentId: '1001', subject: 'Matem√°ticas', grade: 4.5, date: '15/11/2024' },
                { studentId: '1001', subject: 'Espa√±ol', grade: 4.2, date: '15/11/2024' },
                { studentId: '1002', subject: 'Ciencias', grade: 3.8, date: '15/11/2024' }
            ];
            localStorage.setItem('grades', JSON.stringify(grades));
        }

        // Tab management
        function showAdminTab(tabName) {
            document.querySelectorAll('.admin-tab-content').forEach(content => {
                content.classList.add('hidden');
            });
            
            document.querySelectorAll('#adminDashboard .tab-button').forEach(tab => {
                tab.classList.remove('active');
            });
            
            const content = document.getElementById(tabName + 'Content');
            const tab = document.getElementById(tabName + 'Tab');
            
            if (content) content.classList.remove('hidden');
            if (tab) tab.classList.add('active');
        }

        function showTeacherTab(tabName) {
            document.querySelectorAll('.teacher-tab-content').forEach(content => {
                content.classList.add('hidden');
            });
            
            document.querySelectorAll('#teacherDashboard .tab-button').forEach(tab => {
                tab.classList.remove('active');
            });
            
            const content = document.getElementById(tabName + 'Content');
            const tab = document.getElementById(tabName + 'Tab');
            
            if (content) content.classList.remove('hidden');
            if (tab) tab.classList.add('active');
        }

        // Modal functions with DOM validation
        function showLogin() {
            const loginModal = document.getElementById('loginModal');
            const loginTitle = document.getElementById('loginTitle');
            const registerSection = document.getElementById('registerSection');
            
            if (!loginModal || !loginTitle || !registerSection) {
                console.error('Elementos del modal no encontrados');
                return;
            }
            
            currentUserType = null;
            loginModal.classList.remove('hidden');
            loginTitle.textContent = 'Iniciar Sesi√≥n';
            registerSection.classList.add('hidden');
        }

        function showTeacherLogin() {
            const loginModal = document.getElementById('loginModal');
            const loginTitle = document.getElementById('loginTitle');
            const registerSection = document.getElementById('registerSection');
            
            if (!loginModal || !loginTitle || !registerSection) {
                console.error('Elementos del modal no encontrados');
                return;
            }
            
            currentUserType = 'teacher';
            loginModal.classList.remove('hidden');
            loginTitle.textContent = 'Acceso Profesores';
            registerSection.classList.remove('hidden');
        }

        function showAdminLogin() {
            const loginModal = document.getElementById('loginModal');
            const loginTitle = document.getElementById('loginTitle');
            const registerSection = document.getElementById('registerSection');
            
            if (!loginModal || !loginTitle || !registerSection) {
                console.error('Elementos del modal no encontrados');
                return;
            }
            
            currentUserType = 'admin';
            loginModal.classList.remove('hidden');
            loginTitle.textContent = 'Acceso Administraci√≥n';
            registerSection.classList.add('hidden');
        }

        function showParentAccess() {
            const parentModal = document.getElementById('parentModal');
            if (!parentModal) {
                console.error('Modal de padres no encontrado');
                return;
            }
            parentModal.classList.remove('hidden');
        }

        function closeLogin() {
            const loginModal = document.getElementById('loginModal');
            const loginForm = document.getElementById('loginForm');
            
            if (loginModal) loginModal.classList.add('hidden');
            if (loginForm) loginForm.reset();
            currentUserType = null;
        }

        function closeParentModal() {
            const parentModal = document.getElementById('parentModal');
            if (parentModal) parentModal.classList.add('hidden');
        }

        function showRegister() {
            const cedula = document.getElementById('cedula').value.trim();
            const password = document.getElementById('password').value.trim();
            
            if (!cedula || !password) {
                alert('‚ùå Por favor ingresa c√©dula y contrase√±a para registrarte');
                return;
            }

            // Check if user already exists
            if (users.find(u => u.cedula === cedula)) {
                alert('‚ùå Ya existe un usuario con esa c√©dula');
                return;
            }

            const newUser = {
                cedula: cedula,
                password: password,
                type: 'teacher',
                name: 'Profesor ' + cedula
            };

            users.push(newUser);
            localStorage.setItem('users', JSON.stringify(users));
            alert('‚úÖ Usuario registrado exitosamente. Ahora puedes iniciar sesi√≥n.');
            closeLogin();
        }

        // Authentication
        function handleLogin(event) {
            event.preventDefault();
            const cedula = document.getElementById('cedula').value.trim();
            const password = document.getElementById('password').value.trim();

            if (!cedula || !password) {
                alert('‚ùå Por favor ingresa c√©dula y contrase√±a');
                return;
            }

            const user = users.find(u => u.cedula === cedula && u.password === password);
            
            if (user) {
                currentUser = user;
                closeLogin();
                
                if (user.type === 'admin') {
                    showAdminDashboard();
                } else if (user.type === 'teacher') {
                    showTeacherDashboard();
                }
            } else {
                alert('‚ùå Credenciales incorrectas. Verifica tu c√©dula y contrase√±a.');
            }
        }

        function logout() {
            currentUser = null;
            currentUserType = null;
            showWelcome();
        }

        // Dashboard functions
        function showWelcome() {
            document.getElementById('welcomeSection').classList.remove('hidden');
            document.getElementById('adminDashboard').classList.add('hidden');
            document.getElementById('teacherDashboard').classList.add('hidden');
            document.getElementById('studentGrades').classList.add('hidden');
        }

        function showAdminDashboard() {
            document.getElementById('welcomeSection').classList.add('hidden');
            document.getElementById('adminDashboard').classList.remove('hidden');
            document.getElementById('teacherDashboard').classList.add('hidden');
            document.getElementById('studentGrades').classList.add('hidden');
            
            showAdminTab('schedule');
            const scheduleTextarea = document.getElementById('schedule');
            if (scheduleTextarea) scheduleTextarea.value = schedule;
            loadEvents();
            loadParentRatings();
        }

        function showTeacherDashboard() {
            document.getElementById('welcomeSection').classList.add('hidden');
            document.getElementById('adminDashboard').classList.add('hidden');
            document.getElementById('teacherDashboard').classList.remove('hidden');
            document.getElementById('studentGrades').classList.add('hidden');
            
            showTeacherTab('students');
            loadStudentsForGrading();
            loadStudentsList();
        }

        // Student management
        function addStudent() {
            const id = document.getElementById('newStudentId').value.trim();
            const name = document.getElementById('newStudentName').value.trim();
            const grade = document.getElementById('newStudentGrade').value;

            if (!id || !name || !grade) {
                alert('‚ùå Por favor completa todos los campos');
                return;
            }

            if (students.find(s => s.id === id)) {
                alert('‚ùå Ya existe un estudiante con ese n√∫mero de identidad');
                return;
            }

            const student = { id, name, grade };
            students.push(student);
            localStorage.setItem('students', JSON.stringify(students));
            
            // Clear form
            document.getElementById('newStudentId').value = '';
            document.getElementById('newStudentName').value = '';
            document.getElementById('newStudentGrade').value = '';
            
            // Refresh lists
            loadStudentsForGrading();
            loadStudentsList();
            alert('‚úÖ Estudiante agregado exitosamente');
        }

        function loadStudentsForGrading() {
            const select = document.getElementById('gradeStudentSelect');
            if (!select) return;
            
            select.innerHTML = '<option value="">Seleccionar estudiante</option>';
            
            students.forEach(student => {
                const option = document.createElement('option');
                option.value = student.id;
                option.textContent = ${student.name} (${student.grade});
                select.appendChild(option);
            });
        }

        function loadStudentsList() {
            const container = document.getElementById('studentsList');
            if (!container) return;
            
            container.innerHTML = '';
            
            if (students.length === 0) {
                container.innerHTML = '<p class="text-gray-500 text-center py-8">No hay estudiantes registrados a√∫n</p>';
                return;
            }
            
            students.forEach(student => {
                const div = document.createElement('div');
                div.className = 'bg-gradient-to-r from-blue-50 to-indigo-50 p-6 rounded-xl border-l-4 border-blue-500 shadow-sm';
                div.innerHTML = `
                    <div class="flex items-center justify-between">
                        <div>
                            <h4 class="font-bold text-lg text-gray-800">${student.name}</h4>
                            <p class="text-gray-600"><i class="fas fa-id-card mr-2"></i>ID: ${student.id}</p>
                            <p class="text-gray-600"><i class="fas fa-graduation-cap mr-2"></i>Grado: ${student.grade}</p>
                        </div>
                        <div class="text-blue-500 text-2xl">
                            <i class="fas fa-user-graduate"></i>
                        </div>
                    </div>
                `;
                container.appendChild(div);
            });
        }

        // Grades management
        function addGrade() {
            const studentId = document.getElementById('gradeStudentSelect').value;
            const subject = document.getElementById('subject').value.trim();
            const gradeValue = document.getElementById('grade').value;

            if (!studentId || !subject || !gradeValue) {
                alert('‚ùå Por favor completa todos los campos');
                return;
            }

            const gradeNum = parseFloat(gradeValue);
            if (gradeNum < 1 || gradeNum > 5) {
                alert('‚ùå La nota debe estar entre 1.0 y 5.0');
                return;
            }

            const grade = {
                studentId,
                subject,
                grade: gradeNum,
                date: new Date().toLocaleDateString()
            };

            grades.push(grade);
            localStorage.setItem('grades', JSON.stringify(grades));
            
            // Clear form
            document.getElementById('subject').value = '';
            document.getElementById('grade').value = '';
            
            alert('‚úÖ Nota agregada exitosamente');
        }

        function checkStudentGrades(event) {
            event.preventDefault();
            const studentId = document.getElementById('studentId').value.trim();
            
            if (!studentId) {
                alert('‚ùå Por favor ingresa el n√∫mero de identidad');
                return;
            }
            
            const student = students.find(s => s.id === studentId);
            if (!student) {
                alert('‚ùå No se encontr√≥ un estudiante con ese n√∫mero de identidad');
                return;
            }

            const studentGrades = grades.filter(g => g.studentId === studentId);
            
            closeParentModal();
            showStudentGrades(student, studentGrades);
        }

        function showStudentGrades(student, studentGrades) {
            document.getElementById('welcomeSection').classList.add('hidden');
            document.getElementById('studentGrades').classList.remove('hidden');
            
            const studentInfo = document.getElementById('studentInfo');
            if (studentInfo) {
                studentInfo.innerHTML = `
                    <div class="text-center mb-8">
                        <div class="w-24 h-24 rounded-full flex items-center justify-center mx-auto mb-4 shadow-lg" style="background: linear-gradient(135deg, #1e3a8a, #3b82f6);">
                            <i class="fas fa-user-graduate text-white text-3xl"></i>
                        </div>
                        <h3 class="text-3xl font-bold text-gray-800 mb-2">${student.name}</h3>
                        <p class="text-gray-600 text-lg"><i class="fas fa-graduation-cap mr-2"></i>Grado: ${student.grade}</p>
                        <p class="text-gray-600"><i class="fas fa-id-card mr-2"></i>ID: ${student.id}</p>
                    </div>
                `;
            }
            
            const gradesTable = document.getElementById('gradesTable');
            if (!gradesTable) return;
            
            if (studentGrades.length === 0) {
                gradesTable.innerHTML = `
                    <div class="text-center py-12">
                        <i class="fas fa-clipboard-list text-gray-300 text-6xl mb-4"></i>
                        <p class="text-gray-500 text-xl">No hay notas registradas para este estudiante</p>
                    </div>
                `;
            } else {
                let tableHTML = `
                    <h4 class="text-2xl font-bold mb-6 text-center">
                        <i class="fas fa-chart-line mr-2"></i>Registro de Calificaciones
                    </h4>
                    <div class="grid gap-4">
                `;
                
                studentGrades.forEach(grade => {
                    let gradeClass = 'grade-poor';
                    let gradeIcon = 'fas fa-times-circle';
                    
                    if (grade.grade >= 4.5) {
                        gradeClass = 'grade-excellent';
                        gradeIcon = 'fas fa-star';
                    } else if (grade.grade >= 4.0) {
                        gradeClass = 'grade-good';
                        gradeIcon = 'fas fa-check-circle';
                    } else if (grade.grade >= 3.0) {
                        gradeClass = 'grade-average';
                        gradeIcon = 'fas fa-exclamation-circle';
                    }
                    
                    tableHTML += `
                        <div class="${gradeClass} text-white p-6 rounded-xl shadow-lg">
                            <div class="flex items-center justify-between">
                                <div>
                                    <h5 class="text-xl font-bold mb-2">${grade.subject}</h5>
                                    <p class="opacity-90">Fecha: ${grade.date}</p>
                                </div>
                                <div class="text-right">
                                    <div class="text-3xl font-bold mb-2">${grade.grade}</div>
                                    <i class="${gradeIcon} text-2xl"></i>
                                </div>
                            </div>
                        </div>
                    `;
                });
                
                tableHTML += '</div>';
                gradesTable.innerHTML = tableHTML;
            }
        }

        // Schedule and events
        function saveSchedule() {
            const scheduleText = document.getElementById('schedule').value;
            localStorage.setItem('schedule', scheduleText);
            schedule = scheduleText;
            alert('‚úÖ Cronograma guardado exitosamente');
        }

        function addEvent() {
            const date = document.getElementById('eventDate').value;
            const name = document.getElementById('eventName').value.trim();

            if (!date || !name) {
                alert('‚ùå Por favor completa todos los campos');
                return;
            }

            const event = { date, name, id: Date.now() };
            events.push(event);
            localStorage.setItem('events', JSON.stringify(events));
            
            document.getElementById('eventDate').value = '';
            document.getElementById('eventName').value = '';
            
            loadEvents();
            alert('‚úÖ Evento agregado exitosamente');
        }

        function loadEvents() {
            const container = document.getElementById('eventsList');
            if (!container) return;
            
            container.innerHTML = '';
            
            if (events.length === 0) {
                container.innerHTML = '<p class="text-gray-500 text-center py-8">No hay eventos programados</p>';
                return;
            }
            
            events.forEach(event => {
                const div = document.createElement('div');
                div.className = 'bg-gradient-to-r from-yellow-50 to-orange-50 p-6 rounded-xl border-l-4 border-yellow-500 shadow-sm';
                div.innerHTML = `
                    <div class="flex justify-between items-center">
                        <div>
                            <h5 class="font-bold text-lg text-gray-800">${event.name}</h5>
                            <p class="text-gray-600"><i class="fas fa-calendar mr-2"></i>${event.date}</p>
                        </div>
                        <button onclick="deleteEvent(${event.id})" class="text-red-500 hover:text-red-700 transition-colors">
                            <i class="fas fa-trash text-xl"></i>
                        </button>
                    </div>
                `;
                container.appendChild(div);
            });
        }

        function deleteEvent(eventId) {
            events = events.filter(e => e.id !== eventId);
            localStorage.setItem('events', JSON.stringify(events));
            loadEvents();
        }

        // Rating system
        function initializeRating() {
            const stars = document.querySelectorAll('.star');
            stars.forEach(star => {
                star.addEventListener('click', function() {
                    selectedRating = parseInt(this.dataset.rating);
                    updateStarDisplay();
                });
                
                star.addEventListener('mouseover', function() {
                    const rating = parseInt(this.dataset.rating);
                    highlightStars(rating);
                });
            });
            
            const starRating = document.getElementById('starRating');
            if (starRating) {
                starRating.addEventListener('mouseleave', function() {
                    updateStarDisplay();
                });
            }
        }

        function highlightStars(rating) {
            const stars = document.querySelectorAll('.star');
            stars.forEach((star, index) => {
                if (index < rating) {
                    star.classList.add('active');
                } else {
                    star.classList.remove('active');
                }
            });
        }

        function updateStarDisplay() {
            highlightStars(selectedRating);
        }

        function submitRating() {
            if (selectedRating === 0) {
                alert('‚ùå Por favor selecciona una calificaci√≥n');
                return;
            }

            const comment = document.getElementById('ratingComment').value.trim();
            const rating = {
                rating: selectedRating,
                comment: comment,
                date: new Date().toLocaleDateString(),
                id: Date.now()
            };

            ratings.push(rating);
            localStorage.setItem('ratings', JSON.stringify(ratings));
            
            selectedRating = 0;
            document.getElementById('ratingComment').value = '';
            updateStarDisplay();
            
            alert('‚úÖ ¬°Gracias por tu calificaci√≥n!');
        }

        function loadParentRatings() {
            const container = document.getElementById('parentRatings');
            if (!container) return;
            
            container.innerHTML = '';
            
            if (ratings.length === 0) {
                container.innerHTML = `
                    <div class="text-center py-12">
                        <i class="fas fa-star text-gray-300 text-6xl mb-4"></i>
                        <p class="text-gray-500 text-xl">No hay calificaciones a√∫n</p>
                    </div>
                `;
                return;
            }

            const averageRating = ratings.reduce((sum, r) => sum + r.rating, 0) / ratings.length;
            
            container.innerHTML = `
                <div class="text-white p-8 rounded-2xl mb-8 text-center shadow-lg" style="background: linear-gradient(135deg, #FFD700, #FFA500);">
                    <h4 class="text-3xl font-bold mb-2">Calificaci√≥n Promedio</h4>
                    <div class="text-5xl font-bold mb-2">${averageRating.toFixed(1)}/5</div>
                    <div class="text-2xl mb-2">${'‚≠ê'.repeat(Math.round(averageRating))}</div>
                    <p class="text-xl opacity-90">Basado en ${ratings.length} calificaciones</p>
                </div>
                <div class="space-y-6">
            `;
            
            ratings.forEach(rating => {
                const ratingHTML = `
                    <div class="bg-white p-6 rounded-xl shadow-lg border-l-4" style="border-left-color: #FFD700;">
                        <div class="flex items-center justify-between mb-4">
                            <div class="text-2xl">${'‚≠ê'.repeat(rating.rating)}${'‚òÜ'.repeat(5-rating.rating)}</div>
                            <span class="text-gray-500 text-sm">${rating.date}</span>
                        </div>
                        <p class="text-gray-700 leading-relaxed">${rating.comment || 'Sin comentarios'}</p>
                    </div>
                `;
                container.innerHTML += ratingHTML;
            });
            
            container.innerHTML += '</div>';
        }

        // Event listeners setup
        function setupEventListeners() {
            // Test button
            const testButton = document.getElementById('testButton');
            if (testButton) {
                testButton.addEventListener('click', testFunctionality);
            }

            // Login buttons
            const loginButton = document.getElementById('loginButton');
            if (loginButton) {
                loginButton.addEventListener('click', showLogin);
            }

            const teacherLoginButton = document.getElementById('teacherLoginButton');
            if (teacherLoginButton) {
                teacherLoginButton.addEventListener('click', showTeacherLogin);
            }

            const adminLoginButton = document.getElementById('adminLoginButton');
            if (adminLoginButton) {
                adminLoginButton.addEventListener('click', showAdminLogin);
            }

            const parentAccessButton = document.getElementById('parentAccessButton');
            if (parentAccessButton) {
                parentAccessButton.addEventListener('click', showParentAccess);
            }

            // Close buttons
            const closeLoginButton = document.getElementById('closeLoginButton');
            if (closeLoginButton) {
                closeLoginButton.addEventListener('click', closeLogin);
            }

            const closeParentModalButton = document.getElementById('closeParentModalButton');
            if (closeParentModalButton) {
                closeParentModalButton.addEventListener('click', closeParentModal);
            }

            // Forms
            const loginForm = document.getElementById('loginForm');
            if (loginForm) {
                loginForm.addEventListener('submit', handleLogin);
            }

            const parentForm = document.getElementById('parentForm');
            if (parentForm) {
                parentForm.addEventListener('submit', checkStudentGrades);
            }

            // Register button
            const registerButton = document.getElementById('registerButton');
            if (registerButton) {
                registerButton.addEventListener('click', showRegister);
            }

            // Logout buttons
            const logoutButton = document.getElementById('logoutButton');
            if (logoutButton) {
                logoutButton.addEventListener('click', logout);
            }

            const teacherLogoutButton = document.getElementById('teacherLogoutButton');
            if (teacherLogoutButton) {
                teacherLogoutButton.addEventListener('click', logout);
            }

            // Back button
            const backToWelcomeButton = document.getElementById('backToWelcomeButton');
            if (backToWelcomeButton) {
                backToWelcomeButton.addEventListener('click', showWelcome);
            }

            // Admin tabs
            const scheduleTab = document.getElementById('scheduleTab');
            if (scheduleTab) {
                scheduleTab.addEventListener('click', () => showAdminTab('schedule'));
            }

            const eventsTab = document.getElementById('eventsTab');
            if (eventsTab) {
                eventsTab.addEventListener('click', () => showAdminTab('events'));
            }

            const ratingsTab = document.getElementById('ratingsTab');
            if (ratingsTab) {
                ratingsTab.addEventListener('click', () => showAdminTab('ratings'));
            }

            // Teacher tabs
            const studentsTab = document.getElementById('studentsTab');
            if (studentsTab) {
                studentsTab.addEventListener('click', () => showTeacherTab('students'));
            }

            const gradesTab = document.getElementById('gradesTab');
            if (gradesTab) {
                gradesTab.addEventListener('click', () => showTeacherTab('grades'));
            }

            const listTab = document.getElementById('listTab');
            if (listTab) {
                listTab.addEventListener('click', () => showTeacherTab('list'));
            }

            // Action buttons
            const saveScheduleButton = document.getElementById('saveScheduleButton');
            if (saveScheduleButton) {
                saveScheduleButton.addEventListener('click', saveSchedule);
            }

            const addEventButton = document.getElementById('addEventButton');
            if (addEventButton) {
                addEventButton.addEventListener('click', addEvent);
            }

            const addStudentButton = document.getElementById('addStudentButton');
            if (addStudentButton) {
                addStudentButton.addEventListener('click', addStudent);
            }

            const addGradeButton = document.getElementById('addGradeButton');
            if (addGradeButton) {
                addGradeButton.addEventListener('click', addGrade);
            }

            const submitRatingButton = document.getElementById('submitRatingButton');
            if (submitRatingButton) {
                submitRatingButton.addEventListener('click', submitRating);
            }
        }

        // Initialize - GitHub Pages Compatible
        function initializeSystem() {
            console.log('üöÄ Iniciando sistema...');
            
            try {
                // Force setup event listeners multiple times for GitHub Pages
                setupEventListeners();
                initializeRating();
                showWelcome();
                
                // Double-check critical buttons
                setTimeout(() => {
                    const criticalButtons = [
                        'testButton', 'loginButton', 'teacherLoginButton', 
                        'adminLoginButton', 'parentAccessButton'
                    ];
                    
                    criticalButtons.forEach(buttonId => {
                        const button = document.getElementById(buttonId);
                        if (button && !button.onclick) {
                            console.log(üîß Reparando bot√≥n: ${buttonId});
                            switch(buttonId) {
                                case 'testButton':
                                    button.onclick = testFunctionality;
                                    break;
                                case 'loginButton':
                                    button.onclick = showLogin;
                                    break;
                                case 'teacherLoginButton':
                                    button.onclick = showTeacherLogin;
                                    break;
                                case 'adminLoginButton':
                                    button.onclick = showAdminLogin;
                                    break;
                                case 'parentAccessButton':
                                    button.onclick = showParentAccess;
                                    break;
                            }
                        }
                    });
                }, 100);
                
                console.log('‚úÖ Sistema inicializado correctamente');
                console.log('üìä Usuarios disponibles:', users.length);
                console.log('üë®‚Äçüéì Estudiantes de prueba:', students.length);
                
            } catch (error) {
                console.error('‚ùå Error al inicializar:', error);
                // Retry initialization
                setTimeout(initializeSystem, 1000);
            }
        }

        // Multiple initialization strategies for GitHub Pages
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üìÑ DOM Content Loaded');
            initializeSystem();
        });

        window.addEventListener('load', function() {
            console.log('üåê Window Loaded');
            setTimeout(initializeSystem, 200);
        });

        // Immediate execution if DOM is already ready
        if (document.readyState === 'complete' || document.readyState === 'interactive') {
            console.log('‚ö° DOM Already Ready');
            setTimeout(initializeSystem, 50);
        }

        // Emergency fallback - force initialization after 2 seconds
        setTimeout(() => {
            console.log('üÜò Emergency initialization check');
            const testBtn = document.getElementById('testButton');
            if (!testBtn || !testBtn.onclick) {
                console.log('üîß Forcing emergency initialization');
                initializeSystem();
            }
        }, 2000);
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'97a84c6ab26231e0',t:'MTc1NzEwMjI3Ni4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html
