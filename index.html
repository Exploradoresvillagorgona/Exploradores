<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Liceo Exploradores de SueÃ±os - Villa Gorgona</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'azul-institucional': '#1e3a8a',
                        'amarillo-institucional': '#fbbf24',
                        'verde-institucional': '#86efac'
                    }
                }
            }
        }
    </script>
    <style>
        body {
            font-family: 'Arial', sans-serif;
        }
        .gradient-bg {
            background: linear-gradient(135deg, #1e3a8a 0%, #3b82f6 50%, #86efac 100%);
        }
        .card-shadow {
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }
        .btn-primary {
            background: linear-gradient(45deg, #1e3a8a, #3b82f6);
            transition: all 0.3s ease;
        }
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(30, 58, 138, 0.4);
        }
    </style>
</head>
<body class="bg-gray-50">
    <!-- Header -->
    <header class="gradient-bg text-white py-6 shadow-lg">
        <div class="container mx-auto px-4">
            <div class="flex flex-col md:flex-row items-center justify-between">
                <div class="text-center md:text-left mb-4 md:mb-0">
                    <h1 class="text-3xl md:text-4xl font-bold">ğŸ« Liceo Exploradores de SueÃ±os</h1>
                    <p class="text-lg opacity-90">Villa Gorgona - Candelaria</p>
                </div>
                <div class="flex flex-col md:flex-row gap-4">
                    <button onclick="openWhatsApp()" class="btn-primary px-6 py-3 rounded-full font-semibold flex items-center gap-2">
                        ğŸ“± WhatsApp: 313-564-96-61
                    </button>
                    <button onclick="openLocation()" class="bg-verde-institucional text-azul-institucional px-6 py-3 rounded-full font-semibold flex items-center gap-2 hover:bg-green-300 transition-colors">
                        ğŸ“ Ver UbicaciÃ³n
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container mx-auto px-4 py-8">
        <!-- Login Section -->
        <div id="loginSection" class="max-w-md mx-auto bg-white rounded-lg card-shadow p-8 mb-8">
            <h2 class="text-2xl font-bold text-azul-institucional text-center mb-6">ğŸ” Acceso al Sistema</h2>
            
            <div class="mb-6">
                <label class="block text-sm font-medium text-gray-700 mb-2">Tipo de Usuario</label>
                <select id="userType" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-azul-institucional focus:border-transparent">
                    <option value="parent">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ Padre de Familia</option>
                    <option value="teacher">ğŸ‘©â€ğŸ« Profesor</option>
                    <option value="admin">ğŸ‘¨â€ğŸ’¼ Administrador</option>
                </select>
            </div>

            <div class="mb-4">
                <label class="block text-sm font-medium text-gray-700 mb-2">Usuario</label>
                <input type="text" id="username" placeholder="Documento del estudiante / Usuario" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-azul-institucional focus:border-transparent">
            </div>

            <div class="mb-6">
                <label class="block text-sm font-medium text-gray-700 mb-2">ContraseÃ±a</label>
                <input type="password" id="password" placeholder="Documento del estudiante / ContraseÃ±a" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-azul-institucional focus:border-transparent">
            </div>

            <button onclick="login()" class="w-full btn-primary text-white py-3 rounded-lg font-semibold">
                ğŸš€ Ingresar al Sistema
            </button>

            <div id="loginError" class="mt-4 text-red-600 text-center hidden">
                âŒ Usuario o contraseÃ±a incorrecta
            </div>
        </div>

        <!-- Admin Panel -->
        <div id="adminPanel" class="hidden">
            <div class="bg-white rounded-lg card-shadow p-6 mb-6">
                <h2 class="text-2xl font-bold text-azul-institucional mb-6">ğŸ‘¨â€ğŸ’¼ Panel de AdministraciÃ³n</h2>
                
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
                    <button onclick="showSection('studentsManagement')" class="btn-primary text-white p-4 rounded-lg font-semibold">
                        ğŸ‘¨â€ğŸ“ Gestionar Estudiantes
                    </button>
                    <button onclick="showSection('teachersManagement')" class="btn-primary text-white p-4 rounded-lg font-semibold">
                        ğŸ‘©â€ğŸ« Gestionar Profesores
                    </button>
                    <button onclick="showSection('scheduleManagement')" class="btn-primary text-white p-4 rounded-lg font-semibold">
                        ğŸ“… Cronograma
                    </button>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <button onclick="showSection('gradesView')" class="bg-verde-institucional text-azul-institucional p-4 rounded-lg font-semibold">
                        ğŸ“Š Ver Todas las Notas
                    </button>
                    <button onclick="showSection('reportsView')" class="bg-amarillo-institucional text-azul-institucional p-4 rounded-lg font-semibold">
                        ğŸ“‹ Boletines
                    </button>
                </div>
            </div>

            <!-- Students Management -->
            <div id="studentsManagement" class="bg-white rounded-lg card-shadow p-6 mb-6 hidden">
                <h3 class="text-xl font-bold text-azul-institucional mb-4">ğŸ‘¨â€ğŸ“ GestiÃ³n de Estudiantes</h3>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <h4 class="font-semibold mb-3">â• Agregar Estudiante</h4>
                        <input type="text" id="studentName" placeholder="Nombre completo" class="w-full p-2 border rounded mb-2">
                        <input type="text" id="studentDoc" placeholder="Documento" class="w-full p-2 border rounded mb-2">
                        <select id="studentGrade" class="w-full p-2 border rounded mb-2">
                            <option value="">Seleccionar grado</option>
                            <option value="JardÃ­n">JardÃ­n</option>
                            <option value="TransiciÃ³n">TransiciÃ³n</option>
                            <option value="Primero">Primero</option>
                            <option value="Segundo">Segundo</option>
                            <option value="Tercero">Tercero</option>
                            <option value="Cuarto">Cuarto</option>
                            <option value="Quinto">Quinto</option>
                        </select>
                        <input type="text" id="parentName" placeholder="Nombre del padre/madre" class="w-full p-2 border rounded mb-2">
                        <input type="tel" id="parentPhone" placeholder="TelÃ©fono del padre/madre" class="w-full p-2 border rounded mb-2">
                        <button onclick="addStudent()" class="bg-verde-institucional text-azul-institucional px-4 py-2 rounded font-semibold">
                            âœ… Agregar Estudiante
                        </button>
                    </div>
                    
                    <div>
                        <h4 class="font-semibold mb-3">ğŸ“‹ Lista de Estudiantes</h4>
                        <div id="studentsList" class="max-h-64 overflow-y-auto border rounded p-2">
                            <!-- Students will be listed here -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Teachers Management -->
            <div id="teachersManagement" class="bg-white rounded-lg card-shadow p-6 mb-6 hidden">
                <h3 class="text-xl font-bold text-azul-institucional mb-4">ğŸ‘©â€ğŸ« GestiÃ³n de Profesores</h3>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <h4 class="font-semibold mb-3">â• Agregar Profesor</h4>
                        <input type="text" id="teacherName" placeholder="Nombre completo" class="w-full p-2 border rounded mb-2">
                        <input type="text" id="teacherDoc" placeholder="Documento" class="w-full p-2 border rounded mb-2">
                        <input type="text" id="teacherUser" placeholder="Usuario" class="w-full p-2 border rounded mb-2">
                        <input type="password" id="teacherPass" placeholder="ContraseÃ±a" class="w-full p-2 border rounded mb-2">
                        <input type="tel" id="teacherPhone" placeholder="TelÃ©fono" class="w-full p-2 border rounded mb-2">
                        <input type="text" id="teacherCoordinator" placeholder="Coordinador de grupo (opcional)" class="w-full p-2 border rounded mb-2">
                        <div class="mb-2">
                            <label class="block text-sm font-medium text-gray-700 mb-1">Ãreas que enseÃ±a (opcional)</label>
                            <div class="grid grid-cols-2 gap-2 text-sm">
                                <label class="flex items-center"><input type="checkbox" class="teacher-subject mr-1" value="EspaÃ±ol"> EspaÃ±ol</label>
                                <label class="flex items-center"><input type="checkbox" class="teacher-subject mr-1" value="MatemÃ¡ticas"> MatemÃ¡ticas</label>
                                <label class="flex items-center"><input type="checkbox" class="teacher-subject mr-1" value="BiologÃ­a"> BiologÃ­a</label>
                                <label class="flex items-center"><input type="checkbox" class="teacher-subject mr-1" value="Sociales"> Sociales</label>
                                <label class="flex items-center"><input type="checkbox" class="teacher-subject mr-1" value="ArtÃ­stica"> ArtÃ­stica</label>
                                <label class="flex items-center"><input type="checkbox" class="teacher-subject mr-1" value="ReligiÃ³n"> ReligiÃ³n</label>
                                <label class="flex items-center"><input type="checkbox" class="teacher-subject mr-1" value="Danzas"> Danzas</label>
                                <label class="flex items-center"><input type="checkbox" class="teacher-subject mr-1" value="MÃºsica"> MÃºsica</label>
                                <label class="flex items-center"><input type="checkbox" class="teacher-subject mr-1" value="TecnologÃ­a"> TecnologÃ­a</label>
                                <label class="flex items-center"><input type="checkbox" class="teacher-subject mr-1" value="OrtografÃ­a"> OrtografÃ­a</label>
                                <label class="flex items-center"><input type="checkbox" class="teacher-subject mr-1" value="ComprensiÃ³n Lectora"> ComprensiÃ³n Lectora</label>
                                <label class="flex items-center"><input type="checkbox" class="teacher-subject mr-1" value="InglÃ©s"> InglÃ©s</label>
                                <label class="flex items-center"><input type="checkbox" class="teacher-subject mr-1" value="EducaciÃ³n FÃ­sica"> EducaciÃ³n FÃ­sica</label>
                                <label class="flex items-center"><input type="checkbox" class="teacher-subject mr-1" value="CÃ¡tedra"> CÃ¡tedra</label>
                            </div>
                        </div>
                        <button onclick="addTeacher()" class="bg-verde-institucional text-azul-institucional px-4 py-2 rounded font-semibold">
                            âœ… Agregar Profesor
                        </button>
                    </div>
                    
                    <div>
                        <h4 class="font-semibold mb-3">ğŸ“‹ Lista de Profesores</h4>
                        <div id="teachersList" class="max-h-64 overflow-y-auto border rounded p-2">
                            <!-- Teachers will be listed here -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Schedule Management -->
            <div id="scheduleManagement" class="bg-white rounded-lg card-shadow p-6 mb-6 hidden">
                <h3 class="text-xl font-bold text-azul-institucional mb-4">ğŸ“… GestiÃ³n de Cronograma</h3>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <h4 class="font-semibold mb-3">â• Agregar Evento</h4>
                        <input type="text" id="eventTitle" placeholder="TÃ­tulo del evento" class="w-full p-2 border rounded mb-2">
                        <input type="date" id="eventDate" class="w-full p-2 border rounded mb-2">
                        <input type="time" id="eventTime" class="w-full p-2 border rounded mb-2">
                        <textarea id="eventDescription" placeholder="DescripciÃ³n" class="w-full p-2 border rounded mb-2 h-20"></textarea>
                        <button onclick="addEvent()" class="bg-amarillo-institucional text-azul-institucional px-4 py-2 rounded font-semibold">
                            âœ… Agregar Evento
                        </button>
                    </div>
                    
                    <div>
                        <h4 class="font-semibold mb-3">ğŸ“‹ PrÃ³ximos Eventos</h4>
                        <div id="eventsList" class="max-h-64 overflow-y-auto border rounded p-2">
                            <!-- Events will be listed here -->
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Teacher Panel -->
        <div id="teacherPanel" class="hidden">
            <div class="bg-white rounded-lg card-shadow p-6 mb-6">
                <h2 class="text-2xl font-bold text-azul-institucional mb-6">ğŸ‘©â€ğŸ« Panel de Profesor</h2>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <button onclick="showSection('gradesEntry')" class="btn-primary text-white p-4 rounded-lg font-semibold">
                        ğŸ“ Ingresar Notas
                    </button>
                    <button onclick="showSection('attendanceEntry')" class="btn-primary text-white p-4 rounded-lg font-semibold">
                        ğŸ“‹ Registrar Asistencia
                    </button>
                </div>
            </div>

            <!-- Grades Entry -->
            <div id="gradesEntry" class="bg-white rounded-lg card-shadow p-6 mb-6 hidden">
                <h3 class="text-xl font-bold text-azul-institucional mb-4">ğŸ“ Ingreso de Notas</h3>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                    <select id="gradeStudent" class="p-2 border rounded">
                        <option value="">Seleccionar estudiante</option>
                    </select>
                    <select id="gradeSubject" class="p-2 border rounded">
                        <option value="">Seleccionar materia</option>
                        <option value="EspaÃ±ol">EspaÃ±ol</option>
                        <option value="MatemÃ¡ticas">MatemÃ¡ticas</option>
                        <option value="BiologÃ­a">BiologÃ­a</option>
                        <option value="Sociales">Sociales</option>
                        <option value="ArtÃ­stica">ArtÃ­stica</option>
                        <option value="ReligiÃ³n">ReligiÃ³n</option>
                        <option value="Danzas">Danzas</option>
                        <option value="MÃºsica">MÃºsica</option>
                        <option value="TecnologÃ­a">TecnologÃ­a</option>
                        <option value="OrtografÃ­a">OrtografÃ­a</option>
                        <option value="ComprensiÃ³n Lectora">ComprensiÃ³n Lectora</option>
                        <option value="InglÃ©s">InglÃ©s</option>
                        <option value="EducaciÃ³n FÃ­sica">EducaciÃ³n FÃ­sica</option>
                        <option value="CÃ¡tedra">CÃ¡tedra</option>
                    </select>
                </div>

                <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-4">
                    <div>
                        <label class="block text-sm font-medium mb-1">Asistencia (20%)</label>
                        <input type="number" id="attendanceGrade" min="0" max="5" step="0.1" class="w-full p-2 border rounded">
                    </div>
                    <div>
                        <label class="block text-sm font-medium mb-1">Cuaderno (20%)</label>
                        <input type="number" id="notebookGrade" min="0" max="5" step="0.1" class="w-full p-2 border rounded">
                    </div>
                    <div>
                        <label class="block text-sm font-medium mb-1">Trabajo (30%)</label>
                        <input type="number" id="workGrade" min="0" max="5" step="0.1" class="w-full p-2 border rounded">
                    </div>
                    <div>
                        <label class="block text-sm font-medium mb-1">EvaluaciÃ³n (30%)</label>
                        <input type="number" id="examGrade" min="0" max="5" step="0.1" class="w-full p-2 border rounded">
                    </div>
                </div>

                <div class="mb-4">
                    <label class="block text-sm font-medium mb-1">Nota Final Calculada</label>
                    <input type="text" id="finalGrade" readonly class="w-full p-2 border rounded bg-gray-100">
                </div>

                <button onclick="saveGrade()" class="bg-verde-institucional text-azul-institucional px-6 py-2 rounded font-semibold">
                    âœ… Guardar Nota
                </button>
            </div>
        </div>

        <!-- Parent Panel -->
        <div id="parentPanel" class="hidden">
            <div class="bg-white rounded-lg card-shadow p-6 mb-6">
                <h2 class="text-2xl font-bold text-azul-institucional mb-6">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ Panel de Padres</h2>
                
                <div id="studentInfo" class="mb-6">
                    <!-- Student info will be displayed here -->
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                    <button onclick="showSection('gradesView')" class="btn-primary text-white p-4 rounded-lg font-semibold">
                        ğŸ“Š Ver Notas
                    </button>
                    <button onclick="showSection('attendanceView')" class="btn-primary text-white p-4 rounded-lg font-semibold">
                        ğŸ“‹ Ver Asistencia
                    </button>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <button onclick="showSection('scheduleView')" class="bg-amarillo-institucional text-azul-institucional p-4 rounded-lg font-semibold">
                        ğŸ“… Ver Cronograma
                    </button>
                    <button onclick="showSection('ratingSection')" class="bg-verde-institucional text-azul-institucional p-4 rounded-lg font-semibold">
                        â­ Calificar AplicaciÃ³n
                    </button>
                </div>
            </div>

            <!-- Grades View -->
            <div id="gradesView" class="bg-white rounded-lg card-shadow p-6 mb-6 hidden">
                <h3 class="text-xl font-bold text-azul-institucional mb-4">ğŸ“Š Notas del Estudiante</h3>
                <div id="gradesTable">
                    <!-- Grades table will be displayed here -->
                </div>
            </div>

            <!-- Rating Section -->
            <div id="ratingSection" class="bg-white rounded-lg card-shadow p-6 mb-6 hidden">
                <h3 class="text-xl font-bold text-azul-institucional mb-4">â­ Calificar la AplicaciÃ³n</h3>
                
                <div class="mb-4">
                    <label class="block text-sm font-medium mb-2">CalificaciÃ³n (1-5 estrellas)</label>
                    <div class="flex gap-2">
                        <button onclick="setRating(1)" class="text-2xl" id="star1">â­</button>
                        <button onclick="setRating(2)" class="text-2xl" id="star2">â­</button>
                        <button onclick="setRating(3)" class="text-2xl" id="star3">â­</button>
                        <button onclick="setRating(4)" class="text-2xl" id="star4">â­</button>
                        <button onclick="setRating(5)" class="text-2xl" id="star5">â­</button>
                    </div>
                </div>

                <div class="mb-4">
                    <label class="block text-sm font-medium mb-2">Comentarios</label>
                    <textarea id="ratingComment" class="w-full p-3 border rounded-lg h-24" placeholder="Comparte tu experiencia con la aplicaciÃ³n..."></textarea>
                </div>

                <button onclick="submitRating()" class="bg-amarillo-institucional text-azul-institucional px-6 py-2 rounded font-semibold">
                    âœ… Enviar CalificaciÃ³n
                </button>
            </div>
        </div>

        <!-- Schedule View (Shared) -->
        <div id="scheduleView" class="bg-white rounded-lg card-shadow p-6 mb-6 hidden">
            <h3 class="text-xl font-bold text-azul-institucional mb-4">ğŸ“… Cronograma de Actividades</h3>
            <div id="scheduleDisplay">
                <!-- Schedule will be displayed here -->
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="gradient-bg text-white py-6 mt-12">
        <div class="container mx-auto px-4 text-center">
            <p class="mb-2">ğŸ“ Carrera 13# 8-48 CallejÃ³n Betania Villagorgona, Candelaria</p>
            <p class="mb-4">ğŸ“ TelÃ©fono: 313-564-96-61</p>
            <p class="text-sm opacity-75">Â© 2024 Liceo Exploradores de SueÃ±os - Todos los derechos reservados</p>
        </div>
    </footer>

    <script>
        // Global variables
        let currentUser = null;
        let currentUserType = null;
        let selectedRating = 0;

        // Data storage embedded in the page (persistent across all devices)
        let students = [
            // Students will be stored here permanently
        ];
        let teachers = [
            // Teachers will be stored here permanently
        ];
        let grades = [
            // Grades will be stored here permanently
        ];
        let events = [
            // Events will be stored here permanently
        ];
        let ratings = [
            // Ratings will be stored here permanently
        ];

        // Admin credentials (hidden from users)
        const adminCredentials = {
            username: 'admin2024',
            password: 'LiceoExploradores2024!'
        };

        // Initialize the application
        function init() {
            loadDataFromPage();
            updateStudentsList();
            updateTeachersList();
            updateEventsList();
            updateGradeStudentSelect();
            calculateFinalGrade();
        }

        // External links
        function openWhatsApp() {
            window.open('https://wa.me/573135649661', '_blank');
        }

        function openLocation() {
            window.open('https://maps.google.com/?q=Carrera+13+8-48+CallejÃ³n+Betania+Villagorgona+Candelaria', '_blank');
        }

        // Login functionality
        function login() {
            const userType = document.getElementById('userType').value;
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;
            const errorDiv = document.getElementById('loginError');

            errorDiv.classList.add('hidden');

            if (!username || !password) {
                showError('Por favor complete todos los campos');
                return;
            }

            if (userType === 'admin') {
                if (username === adminCredentials.username && password === adminCredentials.password) {
                    currentUser = 'admin';
                    currentUserType = 'admin';
                    showPanel('adminPanel');
                } else {
                    showError('Usuario o contraseÃ±a incorrecta');
                }
            } else if (userType === 'teacher') {
                const teacher = teachers.find(t => t.username === username && t.password === password);
                if (teacher) {
                    currentUser = teacher;
                    currentUserType = 'teacher';
                    showPanel('teacherPanel');
                } else {
                    showError('Usuario o contraseÃ±a incorrecta');
                }
            } else if (userType === 'parent') {
                const student = students.find(s => s.document === username && s.document === password);
                if (student) {
                    currentUser = student;
                    currentUserType = 'parent';
                    showPanel('parentPanel');
                    displayStudentInfo(student);
                } else {
                    showError('Usuario o contraseÃ±a incorrecta');
                }
            }
        }

        function showError(message) {
            const errorDiv = document.getElementById('loginError');
            errorDiv.textContent = 'âŒ ' + message;
            errorDiv.classList.remove('hidden');
        }

        function showPanel(panelId) {
            document.getElementById('loginSection').classList.add('hidden');
            document.getElementById('adminPanel').classList.add('hidden');
            document.getElementById('teacherPanel').classList.add('hidden');
            document.getElementById('parentPanel').classList.add('hidden');
            
            document.getElementById(panelId).classList.remove('hidden');
        }

        function showSection(sectionId) {
            // Hide all sections
            const sections = ['studentsManagement', 'teachersManagement', 'scheduleManagement', 
                            'gradesEntry', 'attendanceEntry', 'gradesView', 'attendanceView', 
                            'scheduleView', 'ratingSection', 'reportsView'];
            
            sections.forEach(section => {
                const element = document.getElementById(section);
                if (element) element.classList.add('hidden');
            });

            // Show selected section
            const element = document.getElementById(sectionId);
            if (element) element.classList.remove('hidden');

            // Load specific data for sections
            if (sectionId === 'scheduleView') {
                displaySchedule();
            } else if (sectionId === 'gradesView') {
                displayGrades();
            }
        }

        // Student management
        function addStudent() {
            const name = document.getElementById('studentName').value;
            const doc = document.getElementById('studentDoc').value;
            const grade = document.getElementById('studentGrade').value;
            const parentName = document.getElementById('parentName').value;
            const parentPhone = document.getElementById('parentPhone').value;

            if (!name || !doc || !grade || !parentName || !parentPhone) {
                alert('âŒ Por favor complete todos los campos');
                return;
            }

            const student = {
                id: Date.now(),
                name,
                document: doc,
                grade,
                parentName,
                parentPhone
            };

            students.push(student);
            saveDataToPage();
            
            // Clear form
            document.getElementById('studentName').value = '';
            document.getElementById('studentDoc').value = '';
            document.getElementById('studentGrade').value = '';
            document.getElementById('parentName').value = '';
            document.getElementById('parentPhone').value = '';

            updateStudentsList();
            updateGradeStudentSelect();
            alert('âœ… Estudiante agregado exitosamente');
        }

        function updateStudentsList() {
            const list = document.getElementById('studentsList');
            list.innerHTML = '';

            students.forEach(student => {
                const div = document.createElement('div');
                div.className = 'border-b pb-2 mb-2';
                div.innerHTML = `
                    <div class="flex justify-between items-center">
                        <div>
                            <strong>${student.name}</strong><br>
                            <small>Doc: ${student.document} - Grado: ${student.grade}</small><br>
                            <small>Padre: ${student.parentName} - Tel: ${student.parentPhone}</small>
                        </div>
                        <button onclick="deleteStudent(${student.id})" class="text-red-600 hover:text-red-800">
                            ğŸ—‘ï¸
                        </button>
                    </div>
                `;
                list.appendChild(div);
            });
        }

        function deleteStudent(id) {
            if (confirm('Â¿EstÃ¡ seguro de eliminar este estudiante?')) {
                students = students.filter(s => s.id !== id);
                saveDataToPage();
                updateStudentsList();
                updateGradeStudentSelect();
            }
        }

        // Teacher management
        function addTeacher() {
            const name = document.getElementById('teacherName').value;
            const doc = document.getElementById('teacherDoc').value;
            const username = document.getElementById('teacherUser').value;
            const password = document.getElementById('teacherPass').value;
            const phone = document.getElementById('teacherPhone').value;
            const coordinator = document.getElementById('teacherCoordinator').value;
            
            // Get selected subjects
            const subjectCheckboxes = document.querySelectorAll('.teacher-subject:checked');
            const subjects = Array.from(subjectCheckboxes).map(cb => cb.value);

            if (!name || !doc || !username || !password || !phone) {
                alert('âŒ Por favor complete todos los campos obligatorios');
                return;
            }

            const teacher = {
                id: Date.now(),
                name,
                document: doc,
                username,
                password,
                phone,
                coordinator: coordinator || '',
                subjects: subjects
            };

            teachers.push(teacher);
            saveDataToPage();
            
            // Clear form
            document.getElementById('teacherName').value = '';
            document.getElementById('teacherDoc').value = '';
            document.getElementById('teacherUser').value = '';
            document.getElementById('teacherPass').value = '';
            document.getElementById('teacherPhone').value = '';
            document.getElementById('teacherCoordinator').value = '';
            
            // Clear checkboxes
            document.querySelectorAll('.teacher-subject').forEach(cb => cb.checked = false);

            updateTeachersList();
            alert('âœ… Profesor agregado exitosamente');
        }

        function updateTeachersList() {
            const list = document.getElementById('teachersList');
            list.innerHTML = '';

            teachers.forEach(teacher => {
                const div = document.createElement('div');
                div.className = 'border-b pb-2 mb-2';
                div.innerHTML = `
                    <div class="flex justify-between items-center">
                        <div>
                            <strong>${teacher.name}</strong><br>
                            <small>Doc: ${teacher.document} - Usuario: ${teacher.username}</small><br>
                            <small>Tel: ${teacher.phone}</small>
                            ${teacher.coordinator ? `<br><small>Coordinador: ${teacher.coordinator}</small>` : ''}
                            ${teacher.subjects && teacher.subjects.length > 0 ? `<br><small>Ãreas: ${teacher.subjects.join(', ')}</small>` : ''}
                        </div>
                        <button onclick="deleteTeacher(${teacher.id})" class="text-red-600 hover:text-red-800">
                            ğŸ—‘ï¸
                        </button>
                    </div>
                `;
                list.appendChild(div);
            });
        }

        function deleteTeacher(id) {
            if (confirm('Â¿EstÃ¡ seguro de eliminar este profesor?')) {
                teachers = teachers.filter(t => t.id !== id);
                saveDataToPage();
                updateTeachersList();
            }
        }

        // Function to save data permanently to the page
        function saveDataToPage() {
            // This function would update the embedded data arrays in the HTML
            // For demonstration, we'll use localStorage as a fallback
            // In a real implementation, this would modify the HTML file itself
            localStorage.setItem('liceo_students', JSON.stringify(students));
            localStorage.setItem('liceo_teachers', JSON.stringify(teachers));
            localStorage.setItem('liceo_grades', JSON.stringify(grades));
            localStorage.setItem('liceo_events', JSON.stringify(events));
            localStorage.setItem('liceo_ratings', JSON.stringify(ratings));
            
            console.log('ğŸ“ Datos guardados en la pÃ¡gina');
        }

        // Function to load data from the page
        function loadDataFromPage() {
            // Load data from localStorage (in real implementation, this would be from embedded arrays)
            const savedStudents = localStorage.getItem('liceo_students');
            const savedTeachers = localStorage.getItem('liceo_teachers');
            const savedGrades = localStorage.getItem('liceo_grades');
            const savedEvents = localStorage.getItem('liceo_events');
            const savedRatings = localStorage.getItem('liceo_ratings');

            if (savedStudents) students = JSON.parse(savedStudents);
            if (savedTeachers) teachers = JSON.parse(savedTeachers);
            if (savedGrades) grades = JSON.parse(savedGrades);
            if (savedEvents) events = JSON.parse(savedEvents);
            if (savedRatings) ratings = JSON.parse(savedRatings);
        }

        // Event management
        function addEvent() {
            const title = document.getElementById('eventTitle').value;
            const date = document.getElementById('eventDate').value;
            const time = document.getElementById('eventTime').value;
            const description = document.getElementById('eventDescription').value;

            if (!title || !date || !time) {
                alert('âŒ Por favor complete todos los campos obligatorios');
                return;
            }

            const event = {
                id: Date.now(),
                title,
                date,
                time,
                description
            };

            events.push(event);
            saveDataToPage();
            
            // Clear form
            document.getElementById('eventTitle').value = '';
            document.getElementById('eventDate').value = '';
            document.getElementById('eventTime').value = '';
            document.getElementById('eventDescription').value = '';

            updateEventsList();
            alert('âœ… Evento agregado exitosamente');
        }

        function updateEventsList() {
            const list = document.getElementById('eventsList');
            list.innerHTML = '';

            // Sort events by date
            const sortedEvents = events.sort((a, b) => new Date(a.date) - new Date(b.date));

            sortedEvents.forEach(event => {
                const div = document.createElement('div');
                div.className = 'border-b pb-2 mb-2';
                div.innerHTML = `
                    <div class="flex justify-between items-center">
                        <div>
                            <strong>${event.title}</strong><br>
                            <small>ğŸ“… ${event.date} â° ${event.time}</small><br>
                            <small>${event.description}</small>
                        </div>
                        <button onclick="deleteEvent(${event.id})" class="text-red-600 hover:text-red-800">
                            ğŸ—‘ï¸
                        </button>
                    </div>
                `;
                list.appendChild(div);
            });
        }

        function deleteEvent(id) {
            if (confirm('Â¿EstÃ¡ seguro de eliminar este evento?')) {
                events = events.filter(e => e.id !== id);
                saveDataToPage();
                updateEventsList();
            }
        }

        function displaySchedule() {
            const display = document.getElementById('scheduleDisplay');
            display.innerHTML = '';

            if (events.length === 0) {
                display.innerHTML = '<p class="text-gray-500 text-center">ğŸ“… No hay eventos programados</p>';
                return;
            }

            const sortedEvents = events.sort((a, b) => new Date(a.date) - new Date(b.date));

            sortedEvents.forEach(event => {
                const div = document.createElement('div');
                div.className = 'bg-gray-50 p-4 rounded-lg mb-4';
                div.innerHTML = `
                    <h4 class="font-bold text-azul-institucional">${event.title}</h4>
                    <p class="text-sm text-gray-600 mb-2">ğŸ“… ${event.date} â° ${event.time}</p>
                    <p>${event.description}</p>
                `;
                display.appendChild(div);
            });
        }

        // Grades management
        function updateGradeStudentSelect() {
            const select = document.getElementById('gradeStudent');
            if (!select) return;
            
            select.innerHTML = '<option value="">Seleccionar estudiante</option>';
            
            students.forEach(student => {
                const option = document.createElement('option');
                option.value = student.id;
                option.textContent = `${student.name} - ${student.grade}`;
                select.appendChild(option);
            });
        }

        function calculateFinalGrade() {
            const attendance = parseFloat(document.getElementById('attendanceGrade')?.value || 0);
            const notebook = parseFloat(document.getElementById('notebookGrade')?.value || 0);
            const work = parseFloat(document.getElementById('workGrade')?.value || 0);
            const exam = parseFloat(document.getElementById('examGrade')?.value || 0);

            const final = (attendance * 0.2) + (notebook * 0.2) + (work * 0.3) + (exam * 0.3);
            
            const finalGradeInput = document.getElementById('finalGrade');
            if (finalGradeInput) {
                finalGradeInput.value = final.toFixed(2);
            }
        }

        // Add event listeners for grade calculation
        document.addEventListener('DOMContentLoaded', function() {
            const gradeInputs = ['attendanceGrade', 'notebookGrade', 'workGrade', 'examGrade'];
            gradeInputs.forEach(id => {
                const input = document.getElementById(id);
                if (input) {
                    input.addEventListener('input', calculateFinalGrade);
                }
            });
        });

        function saveGrade() {
            const studentId = document.getElementById('gradeStudent').value;
            const subject = document.getElementById('gradeSubject').value;
            const attendance = parseFloat(document.getElementById('attendanceGrade').value || 0);
            const notebook = parseFloat(document.getElementById('notebookGrade').value || 0);
            const work = parseFloat(document.getElementById('workGrade').value || 0);
            const exam = parseFloat(document.getElementById('examGrade').value || 0);

            if (!studentId || !subject) {
                alert('âŒ Por favor seleccione estudiante y materia');
                return;
            }

            const finalGrade = (attendance * 0.2) + (notebook * 0.2) + (work * 0.3) + (exam * 0.3);

            const grade = {
                id: Date.now(),
                studentId: parseInt(studentId),
                subject,
                attendance,
                notebook,
                work,
                exam,
                final: parseFloat(finalGrade.toFixed(2)),
                teacher: currentUser.name,
                date: new Date().toISOString().split('T')[0]
            };

            // Remove existing grade for same student and subject
            grades = grades.filter(g => !(g.studentId === parseInt(studentId) && g.subject === subject));
            grades.push(grade);
            saveDataToPage();

            // Clear form
            document.getElementById('gradeStudent').value = '';
            document.getElementById('gradeSubject').value = '';
            document.getElementById('attendanceGrade').value = '';
            document.getElementById('notebookGrade').value = '';
            document.getElementById('workGrade').value = '';
            document.getElementById('examGrade').value = '';
            document.getElementById('finalGrade').value = '';

            alert('âœ… Nota guardada exitosamente');
        }

        // Parent panel functions
        function displayStudentInfo(student) {
            const infoDiv = document.getElementById('studentInfo');
            infoDiv.innerHTML = `
                <div class="bg-azul-institucional text-white p-4 rounded-lg">
                    <h3 class="text-xl font-bold">ğŸ‘¨â€ğŸ“ ${student.name}</h3>
                    <p>ğŸ“„ Documento: ${student.document}</p>
                    <p>ğŸ“ Grado: ${student.grade}</p>
                    <p>ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ Padre/Madre: ${student.parentName}</p>
                </div>
            `;
        }

        function displayGrades() {
            const table = document.getElementById('gradesTable');
            const studentGrades = grades.filter(g => g.studentId === currentUser.id);

            if (studentGrades.length === 0) {
                table.innerHTML = '<p class="text-gray-500 text-center">ğŸ“Š No hay notas registradas</p>';
                return;
            }

            let html = `
                <div class="overflow-x-auto">
                    <table class="w-full border-collapse border border-gray-300">
                        <thead>
                            <tr class="bg-azul-institucional text-white">
                                <th class="border border-gray-300 p-2">Materia</th>
                                <th class="border border-gray-300 p-2">Asistencia</th>
                                <th class="border border-gray-300 p-2">Cuaderno</th>
                                <th class="border border-gray-300 p-2">Trabajo</th>
                                <th class="border border-gray-300 p-2">EvaluaciÃ³n</th>
                                <th class="border border-gray-300 p-2">Nota Final</th>
                                <th class="border border-gray-300 p-2">Fecha</th>
                            </tr>
                        </thead>
                        <tbody>
            `;

            studentGrades.forEach(grade => {
                const status = grade.final >= 3.0 ? 'âœ…' : 'âŒ';
                const statusColor = grade.final >= 3.0 ? 'text-green-600' : 'text-red-600';
                
                html += `
                    <tr>
                        <td class="border border-gray-300 p-2 font-semibold">${grade.subject}</td>
                        <td class="border border-gray-300 p-2 text-center">${grade.attendance}</td>
                        <td class="border border-gray-300 p-2 text-center">${grade.notebook}</td>
                        <td class="border border-gray-300 p-2 text-center">${grade.work}</td>
                        <td class="border border-gray-300 p-2 text-center">${grade.exam}</td>
                        <td class="border border-gray-300 p-2 text-center ${statusColor} font-bold">${status} ${grade.final}</td>
                        <td class="border border-gray-300 p-2 text-center">${grade.date}</td>
                    </tr>
                `;
            });

            html += '</tbody></table></div>';
            table.innerHTML = html;
        }

        // Rating system
        function setRating(rating) {
            selectedRating = rating;
            
            for (let i = 1; i <= 5; i++) {
                const star = document.getElementById(`star${i}`);
                if (i <= rating) {
                    star.textContent = 'â­';
                    star.style.opacity = '1';
                } else {
                    star.textContent = 'â˜†';
                    star.style.opacity = '0.3';
                }
            }
        }

        function submitRating() {
            if (selectedRating === 0) {
                alert('âŒ Por favor seleccione una calificaciÃ³n');
                return;
            }

            const comment = document.getElementById('ratingComment').value;
            
            const rating = {
                id: Date.now(),
                student: currentUser.name,
                rating: selectedRating,
                comment,
                date: new Date().toISOString().split('T')[0]
            };

            ratings.push(rating);
            saveDataToPage();

            alert('âœ… Â¡Gracias por su calificaciÃ³n!');
            
            // Reset form
            selectedRating = 0;
            document.getElementById('ratingComment').value = '';
            for (let i = 1; i <= 5; i++) {
                const star = document.getElementById(`star${i}`);
                star.textContent = 'â˜†';
                star.style.opacity = '0.3';
            }
        }

        // Initialize the application when the page loads
        window.addEventListener('load', init);
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'97c05382a35a3ed2',t:'MTc1NzM1NDIyNS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>

