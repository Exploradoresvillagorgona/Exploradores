<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Liceo Exploradores de SueÃ±os - Villa Gorgona</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'azul-institucional': '#1e3a8a',
                        'amarillo-institucional': '#fbbf24',
                        'verde-institucional': '#86efac'
                    }
                }
            }
        }
    </script>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .btn-hover:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }
        .gradient-bg {
            background: linear-gradient(135deg, #1e3a8a 0%, #3b82f6 50%, #86efac 100%);
        }
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid #3498db;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="bg-gray-50">
    <!-- Loading Indicator -->
    <div id="loadingIndicator" class="fixed top-4 right-4 bg-white p-3 rounded-lg shadow-lg z-50 hidden">
        <div class="flex items-center gap-2">
            <div class="loading"></div>
            <span class="text-sm">Guardando datos...</span>
        </div>
    </div>

    <!-- Header -->
    <header class="gradient-bg text-white shadow-lg">
        <div class="container mx-auto px-4 py-6">
            <div class="flex flex-col md:flex-row items-center justify-between">
                <div class="text-center md:text-left mb-4 md:mb-0">
                    <h1 class="text-3xl md:text-4xl font-bold">ğŸ« Liceo Exploradores de SueÃ±os</h1>
                    <p class="text-lg opacity-90">Villa Gorgona - Educando con amor desde JardÃ­n hasta 5Â° Primaria</p>
                    <p class="text-sm opacity-75">ğŸŒ Datos centralizados - Acceso desde cualquier dispositivo</p>
                </div>
                <div class="flex flex-col md:flex-row gap-4">
                    <button onclick="openWhatsApp()" class="btn-hover bg-green-500 hover:bg-green-600 px-6 py-3 rounded-lg font-semibold transition-all duration-300 flex items-center gap-2">
                        ğŸ“± WhatsApp
                    </button>
                    <button onclick="openLocation()" class="btn-hover bg-red-500 hover:bg-red-600 px-6 py-3 rounded-lg font-semibold transition-all duration-300 flex items-center gap-2">
                        ğŸ“ UbicaciÃ³n
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container mx-auto px-4 py-8">
        <!-- Welcome Section -->
        <section id="welcome" class="fade-in bg-white rounded-xl shadow-lg p-8 mb-8">
            <div class="text-center">
                <h2 class="text-3xl font-bold text-azul-institucional mb-4">Â¡Bienvenidos a nuestro portal educativo! ğŸŒŸ</h2>
                <p class="text-lg text-gray-700 mb-6">Accede a toda la informaciÃ³n acadÃ©mica de tu hijo de manera fÃ¡cil y segura desde cualquier dispositivo</p>
                
                <!-- Contact Info -->
                <div class="grid md:grid-cols-2 gap-6 mb-8">
                    <div class="bg-azul-institucional text-white p-6 rounded-lg">
                        <h3 class="text-xl font-bold mb-2">ğŸ“ Contacto</h3>
                        <p class="text-lg">TelÃ©fono: 313-XXX-XXXX</p>
                    </div>
                    <div class="bg-verde-institucional text-azul-institucional p-6 rounded-lg">
                        <h3 class="text-xl font-bold mb-2">ğŸ“ DirecciÃ³n</h3>
                        <p class="text-lg">Carrera 13# 8-48 CallejÃ³n Betania<br>Villagorgona, Candelaria</p>
                    </div>
                </div>

                <!-- Login Buttons -->
                <div class="grid md:grid-cols-3 gap-4">
                    <button onclick="showLogin('admin')" class="btn-hover bg-azul-institucional hover:bg-blue-800 text-white px-8 py-4 rounded-lg font-bold text-lg transition-all duration-300">
                        ğŸ‘¨â€ğŸ’¼ Administrador
                    </button>
                    <button onclick="showLogin('teacher')" class="btn-hover bg-amarillo-institucional hover:bg-yellow-500 text-azul-institucional px-8 py-4 rounded-lg font-bold text-lg transition-all duration-300">
                        ğŸ‘©â€ğŸ« Profesor
                    </button>
                    <button onclick="showLogin('parent')" class="btn-hover bg-verde-institucional hover:bg-green-400 text-azul-institucional px-8 py-4 rounded-lg font-bold text-lg transition-all duration-300">
                        ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ Padres
                    </button>
                </div>
            </div>
        </section>

        <!-- Login Forms -->
        <section id="loginSection" class="hidden fade-in bg-white rounded-xl shadow-lg p-8 mb-8">
            <div class="max-w-md mx-auto">
                <h3 id="loginTitle" class="text-2xl font-bold text-azul-institucional mb-6 text-center"></h3>
                <form id="loginForm" onsubmit="handleLogin(event)">
                    <div class="mb-4">
                        <label class="block text-gray-700 font-semibold mb-2" for="username">Usuario/Documento:</label>
                        <input type="text" id="username" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:border-azul-institucional" required>
                    </div>
                    <div class="mb-6">
                        <label class="block text-gray-700 font-semibold mb-2" for="password">ContraseÃ±a:</label>
                        <input type="password" id="password" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:border-azul-institucional" required>
                    </div>
                    <button type="submit" class="w-full bg-azul-institucional hover:bg-blue-800 text-white py-3 rounded-lg font-bold transition-all duration-300">
                        ğŸ” Ingresar
                    </button>
                </form>
                <button onclick="showWelcome()" class="w-full mt-4 bg-gray-500 hover:bg-gray-600 text-white py-2 rounded-lg transition-all duration-300">
                    â† Volver
                </button>
                <div id="loginError" class="hidden mt-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded-lg text-center">
                    âŒ Usuario o contraseÃ±a incorrecta
                </div>
            </div>
        </section>

        <!-- Admin Dashboard -->
        <section id="adminDashboard" class="hidden fade-in">
            <div class="bg-white rounded-xl shadow-lg p-8 mb-8">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-3xl font-bold text-azul-institucional">ğŸ‘¨â€ğŸ’¼ Panel de AdministraciÃ³n</h2>
                    <div class="flex gap-2">
                        <button onclick="syncData()" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg transition-all duration-300">
                            ğŸ’¾ Guardar
                        </button>
                        <button onclick="logout()" class="bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg transition-all duration-300">
                            ğŸšª Cerrar SesiÃ³n
                        </button>
                    </div>
                </div>
                
                <div class="grid md:grid-cols-4 gap-4 mb-8">
                    <button onclick="showAdminSection('students')" class="btn-hover bg-blue-500 hover:bg-blue-600 text-white p-4 rounded-lg font-semibold transition-all duration-300">
                        ğŸ‘¨â€ğŸ“ Gestionar Estudiantes
                    </button>
                    <button onclick="showAdminSection('teachers')" class="btn-hover bg-green-500 hover:bg-green-600 text-white p-4 rounded-lg font-semibold transition-all duration-300">
                        ğŸ‘©â€ğŸ« Gestionar Profesores
                    </button>
                    <button onclick="showAdminSection('schedule')" class="btn-hover bg-purple-500 hover:bg-purple-600 text-white p-4 rounded-lg font-semibold transition-all duration-300">
                        ğŸ“… Cronograma
                    </button>
                    <button onclick="showAdminSection('ratings')" class="btn-hover bg-orange-500 hover:bg-orange-600 text-white p-4 rounded-lg font-semibold transition-all duration-300">
                        â­ Calificaciones
                    </button>
                </div>

                <div id="adminContent" class="bg-gray-50 rounded-lg p-6">
                    <p class="text-center text-gray-600">Selecciona una opciÃ³n del menÃº superior</p>
                </div>
            </div>
        </section>

        <!-- Teacher Dashboard -->
        <section id="teacherDashboard" class="hidden fade-in">
            <div class="bg-white rounded-xl shadow-lg p-8 mb-8">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-3xl font-bold text-azul-institucional">ğŸ‘©â€ğŸ« Panel de Profesor</h2>
                    <div class="flex gap-2">
                        <button onclick="syncData()" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg transition-all duration-300">
                            ğŸ’¾ Guardar
                        </button>
                        <button onclick="logout()" class="bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg transition-all duration-300">
                            ğŸšª Cerrar SesiÃ³n
                        </button>
                    </div>
                </div>
                
                <div class="grid md:grid-cols-3 gap-4 mb-8">
                    <button onclick="showTeacherSection('grades')" class="btn-hover bg-blue-500 hover:bg-blue-600 text-white p-4 rounded-lg font-semibold transition-all duration-300">
                        ğŸ“ Ingresar Notas
                    </button>
                    <button onclick="showTeacherSection('attendance')" class="btn-hover bg-green-500 hover:bg-green-600 text-white p-4 rounded-lg font-semibold transition-all duration-300">
                        âœ… Asistencia
                    </button>
                    <button onclick="showTeacherSection('students')" class="btn-hover bg-purple-500 hover:bg-purple-600 text-white p-4 rounded-lg font-semibold transition-all duration-300">
                        ğŸ‘¥ Mis Estudiantes
                    </button>
                </div>

                <div id="teacherContent" class="bg-gray-50 rounded-lg p-6">
                    <p class="text-center text-gray-600">Selecciona una opciÃ³n del menÃº superior</p>
                </div>
            </div>
        </section>

        <!-- Parent Dashboard -->
        <section id="parentDashboard" class="hidden fade-in">
            <div class="bg-white rounded-xl shadow-lg p-8 mb-8">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-3xl font-bold text-azul-institucional">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ Portal de Padres</h2>
                    <div class="flex gap-2">
                        <button onclick="syncData()" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg transition-all duration-300">
                            ğŸ’¾ Guardar
                        </button>
                        <button onclick="logout()" class="bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg transition-all duration-300">
                            ğŸšª Cerrar SesiÃ³n
                        </button>
                    </div>
                </div>
                
                <div id="studentInfo" class="mb-8">
                    <!-- Student info will be loaded here -->
                </div>

                <div class="grid md:grid-cols-2 gap-4 mb-8">
                    <button onclick="showParentSection('grades')" class="btn-hover bg-blue-500 hover:bg-blue-600 text-white p-4 rounded-lg font-semibold transition-all duration-300">
                        ğŸ“Š Ver Notas
                    </button>
                    <button onclick="showParentSection('attendance')" class="btn-hover bg-green-500 hover:bg-green-600 text-white p-4 rounded-lg font-semibold transition-all duration-300">
                        ğŸ“… Ver Asistencia
                    </button>
                </div>

                <div id="parentContent" class="bg-gray-50 rounded-lg p-6">
                    <p class="text-center text-gray-600">Selecciona una opciÃ³n del menÃº superior</p>
                </div>

                <!-- Rating Section -->
                <div class="mt-8 bg-amarillo-institucional bg-opacity-20 rounded-lg p-6">
                    <h3 class="text-xl font-bold text-azul-institucional mb-4">â­ Califica nuestra plataforma</h3>
                    <div class="flex gap-2 mb-4">
                        <button onclick="setRating(1)" class="rating-star text-3xl text-gray-400 hover:text-yellow-500 transition-colors duration-300">â­</button>
                        <button onclick="setRating(2)" class="rating-star text-3xl text-gray-400 hover:text-yellow-500 transition-colors duration-300">â­</button>
                        <button onclick="setRating(3)" class="rating-star text-3xl text-gray-400 hover:text-yellow-500 transition-colors duration-300">â­</button>
                        <button onclick="setRating(4)" class="rating-star text-3xl text-gray-400 hover:text-yellow-500 transition-colors duration-300">â­</button>
                        <button onclick="setRating(5)" class="rating-star text-3xl text-gray-400 hover:text-yellow-500 transition-colors duration-300">â­</button>
                    </div>
                    <textarea id="ratingComment" placeholder="DÃ©janos tus comentarios..." class="w-full p-3 border border-gray-300 rounded-lg mb-4"></textarea>
                    <button onclick="submitRating()" class="bg-azul-institucional hover:bg-blue-800 text-white px-6 py-2 rounded-lg transition-all duration-300">
                        Enviar CalificaciÃ³n
                    </button>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="gradient-bg text-white py-8 mt-12">
        <div class="container mx-auto px-4 text-center">
            <h3 class="text-2xl font-bold mb-4">ğŸ« Liceo Exploradores de SueÃ±os</h3>
            <p class="mb-4">Formando lÃ­deres del maÃ±ana con amor y dedicaciÃ³n</p>
            <p class="text-sm opacity-80">Â© 2024 - Todos los derechos reservados | Sistema de gestiÃ³n acadÃ©mica</p>
        </div>
    </footer>

    <script>
        // Variables globales
        let currentUser = null;
        let currentUserType = null;
        let selectedRating = 0;
        
        // DATOS CENTRALIZADOS - Estos datos estÃ¡n disponibles para todos los usuarios
        // Cuando agregues estudiantes/profesores aquÃ­, TODOS podrÃ¡n acceder desde cualquier computador
        let systemData = {
            students: [
                {
                    id: '1234567890',
                    name: 'Ana MarÃ­a GarcÃ­a',
                    grade: 'JardÃ­n',
                    parent: 'Carlos GarcÃ­a',
                    coordinator: 'MarÃ­a LÃ³pez',
                    grades: {
                        'EspaÃ±ol': { asistencia: 95, cuaderno: 90, trabajo: 88, evaluacion: 92 },
                        'MatemÃ¡ticas': { asistencia: 90, cuaderno: 85, trabajo: 87, evaluacion: 89 },
                        'BiologÃ­a': { asistencia: 92, cuaderno: 88, trabajo: 90, evaluacion: 91 },
                        'Sociales': { asistencia: 88, cuaderno: 92, trabajo: 85, evaluacion: 87 },
                        'ArtÃ­stica': { asistencia: 95, cuaderno: 90, trabajo: 93, evaluacion: 94 },
                        'ReligiÃ³n': { asistencia: 90, cuaderno: 88, trabajo: 89, evaluacion: 90 },
                        'Danzas': { asistencia: 93, cuaderno: 91, trabajo: 92, evaluacion: 93 },
                        'MÃºsica': { asistencia: 91, cuaderno: 89, trabajo: 90, evaluacion: 92 },
                        'TecnologÃ­a': { asistencia: 87, cuaderno: 85, trabajo: 88, evaluacion: 86 },
                        'OrtografÃ­a': { asistencia: 89, cuaderno: 87, trabajo: 90, evaluacion: 88 },
                        'ComprensiÃ³n Lectora': { asistencia: 92, cuaderno: 90, trabajo: 91, evaluacion: 93 },
                        'InglÃ©s': { asistencia: 85, cuaderno: 83, trabajo: 86, evaluacion: 87 },
                        'EducaciÃ³n FÃ­sica': { asistencia: 95, cuaderno: 90, trabajo: 92, evaluacion: 94 }
                    },
                    attendance: 95
                }
                // AQUÃ AGREGAS MÃS ESTUDIANTES cuando los crees como admin
            ],
            teachers: [
                {
                    id: 'teacher001',
                    name: 'MarÃ­a LÃ³pez',
                    password: 'teacher123',
                    subjects: ['EspaÃ±ol', 'MatemÃ¡ticas'],
                    coordinator: true,
                    grade: 'JardÃ­n'
                }
                // AQUÃ AGREGAS MÃS PROFESORES cuando los crees como admin
            ],
            schedule: [
                {
                    id: Date.now(),
                    title: 'ReuniÃ³n de Padres - JardÃ­n',
                    date: '2024-01-15',
                    time: '14:00',
                    description: 'ReuniÃ³n informativa sobre el progreso acadÃ©mico'
                }
            ],
            ratings: [],
            admin: { username: 'admin2024', password: 'LES2024*' }
        };

        // Funciones de almacenamiento mejoradas
        function showLoading() {
            document.getElementById('loadingIndicator').classList.remove('hidden');
        }

        function hideLoading() {
            document.getElementById('loadingIndicator').classList.add('hidden');
        }

        async function saveToStorage(path, data) {
            try {
                showLoading();
                // Simular guardado en la nube
                localStorage.setItem(`liceo_${path}`, JSON.stringify(data));
                setTimeout(hideLoading, 500);
                return true;
            } catch (error) {
                console.error('Error guardando:', error);
                hideLoading();
                return false;
            }
        }

        async function loadFromStorage(path) {
            try {
                const data = localStorage.getItem(`liceo_${path}`);
                return data ? JSON.parse(data) : null;
            } catch (error) {
                console.error('Error cargando:', error);
                return null;
            }
        }

        async function syncData() {
            try {
                showLoading();
                
                // Los datos ya estÃ¡n centralizados en systemData
                // Solo guardamos cambios adicionales en localStorage como backup
                const savedRatings = await loadFromStorage('ratings');
                if (savedRatings) {
                    systemData.ratings = [...systemData.ratings, ...savedRatings];
                }

                hideLoading();
                console.log('âœ… Datos sincronizados correctamente');
            } catch (error) {
                console.error('Error sincronizando:', error);
                hideLoading();
            }
        }

        // Funciones de navegaciÃ³n
        function showWelcome() {
            hideAllSections();
            document.getElementById('welcome').classList.remove('hidden');
        }

        function showLogin(userType) {
            hideAllSections();
            document.getElementById('loginSection').classList.remove('hidden');
            document.getElementById('loginError').classList.add('hidden');
            
            const titles = {
                admin: 'ğŸ‘¨â€ğŸ’¼ Acceso Administrador',
                teacher: 'ğŸ‘©â€ğŸ« Acceso Profesor',
                parent: 'ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ Acceso Padres'
            };
            
            document.getElementById('loginTitle').textContent = titles[userType];
            document.getElementById('loginForm').dataset.userType = userType;
            
            // Limpiar formulario
            document.getElementById('username').value = '';
            document.getElementById('password').value = '';
        }

        function hideAllSections() {
            const sections = ['welcome', 'loginSection', 'adminDashboard', 'teacherDashboard', 'parentDashboard'];
            sections.forEach(section => {
                document.getElementById(section).classList.add('hidden');
            });
        }

        // FunciÃ³n de login
        async function handleLogin(event) {
            event.preventDefault();
            
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;
            const userType = event.target.dataset.userType;
            
            let loginSuccess = false;
            
            if (userType === 'admin') {
                if (username === systemData.admin.username && password === systemData.admin.password) {
                    loginSuccess = true;
                    currentUser = 'admin';
                    currentUserType = 'admin';
                    showAdminDashboard();
                }
            } else if (userType === 'teacher') {
                const teacher = systemData.teachers.find(t => t.id === username && t.password === password);
                if (teacher) {
                    loginSuccess = true;
                    currentUser = teacher;
                    currentUserType = 'teacher';
                    showTeacherDashboard();
                }
            } else if (userType === 'parent') {
                const student = systemData.students.find(s => s.id === username);
                if (student && password === username) {
                    loginSuccess = true;
                    currentUser = student;
                    currentUserType = 'parent';
                    showParentDashboard();
                }
            }
            
            if (!loginSuccess) {
                document.getElementById('loginError').classList.remove('hidden');
            }
        }

        // Dashboards
        function showAdminDashboard() {
            hideAllSections();
            document.getElementById('adminDashboard').classList.remove('hidden');
            document.getElementById('adminContent').innerHTML = '<p class="text-center text-gray-600">Selecciona una opciÃ³n del menÃº superior</p>';
        }

        function showTeacherDashboard() {
            hideAllSections();
            document.getElementById('teacherDashboard').classList.remove('hidden');
            document.getElementById('teacherContent').innerHTML = '<p class="text-center text-gray-600">Selecciona una opciÃ³n del menÃº superior</p>';
        }

        function showParentDashboard() {
            hideAllSections();
            document.getElementById('parentDashboard').classList.remove('hidden');
            
            const studentInfo = document.getElementById('studentInfo');
            studentInfo.innerHTML = `
                <div class="bg-azul-institucional text-white rounded-lg p-6">
                    <h3 class="text-2xl font-bold mb-2">ğŸ‘¨â€ğŸ“ ${currentUser.name}</h3>
                    <p class="text-lg">Grado: ${currentUser.grade}</p>
                    <p class="text-lg">Documento: ${currentUser.id}</p>
                    <p class="text-lg">Coordinador: ${currentUser.coordinator}</p>
                </div>
            `;
            
            document.getElementById('parentContent').innerHTML = '<p class="text-center text-gray-600">Selecciona una opciÃ³n del menÃº superior</p>';
        }

        // Funciones de gestiÃ³n de datos
        async function addStudent(event) {
            event.preventDefault();
            
            const newStudent = {
                id: document.getElementById('studentId').value,
                name: document.getElementById('studentName').value,
                grade: document.getElementById('studentGrade').value,
                parent: document.getElementById('studentParent').value,
                coordinator: document.getElementById('studentCoordinator').value || 'Sin asignar',
                grades: {},
                attendance: 100
            };
            
            // Inicializar notas en 0 para todas las materias
            const subjects = ['EspaÃ±ol', 'MatemÃ¡ticas', 'BiologÃ­a', 'Sociales', 'ArtÃ­stica', 'ReligiÃ³n', 'Danzas', 'MÃºsica', 'TecnologÃ­a', 'OrtografÃ­a', 'ComprensiÃ³n Lectora', 'InglÃ©s', 'EducaciÃ³n FÃ­sica'];
            subjects.forEach(subject => {
                newStudent.grades[subject] = { asistencia: 0, cuaderno: 0, trabajo: 0, evaluacion: 0 };
            });
            
            systemData.students.push(newStudent);
            
            // Actualizar la lista
            document.getElementById('studentsList').innerHTML = generateStudentsList();
            
            // Limpiar formulario
            event.target.reset();
            
            alert('âœ… Estudiante agregado exitosamente - Ahora estÃ¡ disponible para todos los usuarios');
        }

        async function addTeacher(event) {
            event.preventDefault();
            
            const subjects = [];
            document.querySelectorAll('input[type="checkbox"]:checked').forEach(checkbox => {
                if (checkbox.value !== 'on') {
                    subjects.push(checkbox.value);
                }
            });
            
            const newTeacher = {
                id: document.getElementById('teacherId').value,
                name: document.getElementById('teacherName').value,
                password: document.getElementById('teacherPassword').value,
                email: document.getElementById('teacherEmail').value || '',
                subjects: subjects,
                coordinator: document.getElementById('isCoordinator').checked,
                grade: document.getElementById('teacherGrade').value || ''
            };
            
            systemData.teachers.push(newTeacher);
            
            // Actualizar la lista
            document.getElementById('teachersList').innerHTML = generateTeachersList();
            
            // Limpiar formulario
            event.target.reset();
            
            alert('âœ… Profesor agregado exitosamente - Ya puede acceder desde cualquier computador');
        }

        async function addActivity(event) {
            event.preventDefault();
            
            const newActivity = {
                id: Date.now(),
                title: document.getElementById('activityTitle').value,
                date: document.getElementById('activityDate').value,
                time: document.getElementById('activityTime').value,
                description: document.getElementById('activityDescription').value
            };
            
            systemData.schedule.push(newActivity);
            
            // Actualizar la lista
            document.getElementById('activitiesList').innerHTML = generateActivitiesList();
            
            // Limpiar formulario
            event.target.reset();
            
            alert('âœ… Actividad agregada exitosamente');
        }

        async function removeStudent(studentId) {
            if (confirm('Â¿EstÃ¡s seguro de que quieres eliminar este estudiante?')) {
                systemData.students = systemData.students.filter(s => s.id !== studentId);
                document.getElementById('studentsList').innerHTML = generateStudentsList();
                alert('âœ… Estudiante eliminado exitosamente');
            }
        }

        async function removeTeacher(teacherId) {
            if (confirm('Â¿EstÃ¡s seguro de que quieres eliminar este profesor?')) {
                systemData.teachers = systemData.teachers.filter(t => t.id !== teacherId);
                document.getElementById('teachersList').innerHTML = generateTeachersList();
                alert('âœ… Profesor eliminado exitosamente');
            }
        }

        async function removeActivity(activityId) {
            if (confirm('Â¿EstÃ¡s seguro de que quieres eliminar esta actividad?')) {
                systemData.schedule = systemData.schedule.filter(a => a.id !== activityId);
                document.getElementById('activitiesList').innerHTML = generateActivitiesList();
                alert('âœ… Actividad eliminada exitosamente');
            }
        }

        async function saveGrades(event) {
            event.preventDefault();
            
            const studentId = document.getElementById('gradeStudent').value;
            const subject = document.getElementById('gradeSubject').value;
            const attendance = parseInt(document.getElementById('gradeAttendance').value);
            const notebook = parseInt(document.getElementById('gradeNotebook').value);
            const work = parseInt(document.getElementById('gradeWork').value);
            const evaluation = parseInt(document.getElementById('gradeEvaluation').value);
            
            const student = systemData.students.find(s => s.id === studentId);
            if (student) {
                student.grades[subject] = {
                    asistencia: attendance,
                    cuaderno: notebook,
                    trabajo: work,
                    evaluacion: evaluation
                };
                
                alert('âœ… Notas guardadas exitosamente');
                event.target.reset();
            }
        }

        async function submitRating() {
            if (selectedRating === 0) {
                alert('Por favor selecciona una calificaciÃ³n');
                return;
            }
            
            const comment = document.getElementById('ratingComment').value;
            
            const newRating = {
                rating: selectedRating,
                comment: comment,
                date: new Date().toLocaleDateString(),
                student: currentUser.name
            };
            
            systemData.ratings.push(newRating);
            
            alert('âœ… Â¡Gracias por tu calificaciÃ³n!');
            
            // Limpiar formulario
            selectedRating = 0;
            document.getElementById('ratingComment').value = '';
            document.querySelectorAll('.rating-star').forEach(star => {
                star.classList.remove('text-yellow-500');
                star.classList.add('text-gray-400');
            });
        }

        // Secciones de administrador
        function showAdminSection(section) {
            const content = document.getElementById('adminContent');
            
            switch(section) {
                case 'students':
                    content.innerHTML = `
                        <h3 class="text-2xl font-bold text-azul-institucional mb-6">ğŸ‘¨â€ğŸ“ GestiÃ³n de Estudiantes</h3>
                        <div class="bg-yellow-100 border border-yellow-400 text-yellow-800 p-4 rounded-lg mb-6">
                            <p class="font-semibold">ğŸ“ Instrucciones importantes:</p>
                            <p>â€¢ Los estudiantes que agregues aquÃ­ estarÃ¡n disponibles para TODOS los usuarios</p>
                            <p>â€¢ Los padres podrÃ¡n acceder usando el documento como usuario Y contraseÃ±a</p>
                            <p>â€¢ Los profesores podrÃ¡n ver y calificar a estos estudiantes</p>
                        </div>
                        <div class="grid md:grid-cols-2 gap-6">
                            <div class="bg-white p-6 rounded-lg shadow">
                                <h4 class="text-xl font-bold mb-4">â• Agregar Estudiante</h4>
                                <form onsubmit="addStudent(event)">
                                    <input type="text" id="studentName" placeholder="Nombre completo" class="w-full p-3 border rounded-lg mb-3" required>
                                    <input type="text" id="studentId" placeholder="Documento (serÃ¡ usuario y contraseÃ±a)" class="w-full p-3 border rounded-lg mb-3" required>
                                    <select id="studentGrade" class="w-full p-3 border rounded-lg mb-3" required>
                                        <option value="">Seleccionar grado</option>
                                        <option value="JardÃ­n">JardÃ­n</option>
                                        <option value="TransiciÃ³n">TransiciÃ³n</option>
                                        <option value="1Â°">1Â° Primaria</option>
                                        <option value="2Â°">2Â° Primaria</option>
                                        <option value="3Â°">3Â° Primaria</option>
                                        <option value="4Â°">4Â° Primaria</option>
                                        <option value="5Â°">5Â° Primaria</option>
                                    </select>
                                    <input type="text" id="studentParent" placeholder="Nombre del padre/madre" class="w-full p-3 border rounded-lg mb-3" required>
                                    <input type="text" id="studentCoordinator" placeholder="Coordinador de grupo (opcional)" class="w-full p-3 border rounded-lg mb-3">
                                    <button type="submit" class="w-full bg-blue-500 hover:bg-blue-600 text-white p-3 rounded-lg font-semibold">Agregar Estudiante</button>
                                </form>
                            </div>
                            <div class="bg-white p-6 rounded-lg shadow">
                                <h4 class="text-xl font-bold mb-4">ğŸ“‹ Lista de Estudiantes</h4>
                                <div id="studentsList" class="space-y-3 max-h-96 overflow-y-auto">
                                    ${generateStudentsList()}
                                </div>
                            </div>
                        </div>
                    `;
                    break;
                    
                case 'teachers':
                    content.innerHTML = `
                        <h3 class="text-2xl font-bold text-azul-institucional mb-6">ğŸ‘©â€ğŸ« GestiÃ³n de Profesores</h3>
                        <div class="bg-green-100 border border-green-400 text-green-800 p-4 rounded-lg mb-6">
                            <p class="font-semibold">ğŸ“ Instrucciones importantes:</p>
                            <p>â€¢ Los profesores que agregues aquÃ­ podrÃ¡n acceder desde cualquier computador</p>
                            <p>â€¢ Usa el ID y contraseÃ±a que asignes para que puedan ingresar</p>
                            <p>â€¢ PodrÃ¡n ver y calificar a todos los estudiantes del sistema</p>
                        </div>
                        <div class="grid md:grid-cols-2 gap-6">
                            <div class="bg-white p-6 rounded-lg shadow">
                                <h4 class="text-xl font-bold mb-4">â• Agregar Profesor</h4>
                                <form onsubmit="addTeacher(event)">
                                    <input type="text" id="teacherName" placeholder="Nombre completo" class="w-full p-3 border rounded-lg mb-3" required>
                                    <input type="text" id="teacherId" placeholder="ID de usuario (ej: teacher002)" class="w-full p-3 border rounded-lg mb-3" required>
                                    <input type="password" id="teacherPassword" placeholder="ContraseÃ±a" class="w-full p-3 border rounded-lg mb-3" required>
                                    <input type="email" id="teacherEmail" placeholder="Email (opcional)" class="w-full p-3 border rounded-lg mb-3">
                                    <select id="teacherGrade" class="w-full p-3 border rounded-lg mb-3">
                                        <option value="">Grado a cargo (opcional)</option>
                                        <option value="JardÃ­n">JardÃ­n</option>
                                        <option value="TransiciÃ³n">TransiciÃ³n</option>
                                        <option value="1Â°">1Â° Primaria</option>
                                        <option value="2Â°">2Â° Primaria</option>
                                        <option value="3Â°">3Â° Primaria</option>
                                        <option value="4Â°">4Â° Primaria</option>
                                        <option value="5Â°">5Â° Primaria</option>
                                    </select>
                                    <div class="mb-3">
                                        <label class="block text-gray-700 font-semibold mb-2">Materias que enseÃ±a:</label>
                                        <div class="grid grid-cols-2 gap-2">
                                            <label class="flex items-center"><input type="checkbox" value="EspaÃ±ol" class="mr-2"> EspaÃ±ol</label>
                                            <label class="flex items-center"><input type="checkbox" value="MatemÃ¡ticas" class="mr-2"> MatemÃ¡ticas</label>
                                            <label class="flex items-center"><input type="checkbox" value="BiologÃ­a" class="mr-2"> BiologÃ­a</label>
                                            <label class="flex items-center"><input type="checkbox" value="Sociales" class="mr-2"> Sociales</label>
                                            <label class="flex items-center"><input type="checkbox" value="ArtÃ­stica" class="mr-2"> ArtÃ­stica</label>
                                            <label class="flex items-center"><input type="checkbox" value="ReligiÃ³n" class="mr-2"> ReligiÃ³n</label>
                                            <label class="flex items-center"><input type="checkbox" value="Danzas" class="mr-2"> Danzas</label>
                                            <label class="flex items-center"><input type="checkbox" value="MÃºsica" class="mr-2"> MÃºsica</label>
                                            <label class="flex items-center"><input type="checkbox" value="TecnologÃ­a" class="mr-2"> TecnologÃ­a</label>
                                            <label class="flex items-center"><input type="checkbox" value="OrtografÃ­a" class="mr-2"> OrtografÃ­a</label>
                                            <label class="flex items-center"><input type="checkbox" value="ComprensiÃ³n Lectora" class="mr-2"> ComprensiÃ³n Lectora</label>
                                            <label class="flex items-center"><input type="checkbox" value="InglÃ©s" class="mr-2"> InglÃ©s</label>
                                            <label class="flex items-center"><input type="checkbox" value="EducaciÃ³n FÃ­sica" class="mr-2"> EducaciÃ³n FÃ­sica</label>
                                        </div>
                                    </div>
                                    <label class="flex items-center mb-3">
                                        <input type="checkbox" id="isCoordinator" class="mr-2"> Es coordinador de grupo
                                    </label>
                                    <button type="submit" class="w-full bg-green-500 hover:bg-green-600 text-white p-3 rounded-lg font-semibold">Agregar Profesor</button>
                                </form>
                            </div>
                            <div class="bg-white p-6 rounded-lg shadow">
                                <h4 class="text-xl font-bold mb-4">ğŸ“‹ Lista de Profesores</h4>
                                <div id="teachersList" class="space-y-3 max-h-96 overflow-y-auto">
                                    ${generateTeachersList()}
                                </div>
                            </div>
                        </div>
                    `;
                    break;
                    
                case 'schedule':
                    content.innerHTML = `
                        <h3 class="text-2xl font-bold text-azul-institucional mb-6">ğŸ“… Cronograma de Actividades</h3>
                        <div class="grid md:grid-cols-2 gap-6">
                            <div class="bg-white p-6 rounded-lg shadow">
                                <h4 class="text-xl font-bold mb-4">â• Agregar Actividad</h4>
                                <form onsubmit="addActivity(event)">
                                    <input type="text" id="activityTitle" placeholder="TÃ­tulo de la actividad" class="w-full p-3 border rounded-lg mb-3" required>
                                    <input type="date" id="activityDate" class="w-full p-3 border rounded-lg mb-3" required>
                                    <input type="time" id="activityTime" class="w-full p-3 border rounded-lg mb-3" required>
                                    <textarea id="activityDescription" placeholder="DescripciÃ³n de la actividad" class="w-full p-3 border rounded-lg mb-3 h-24" required></textarea>
                                    <button type="submit" class="w-full bg-purple-500 hover:bg-purple-600 text-white p-3 rounded-lg font-semibold">Agregar Actividad</button>
                                </form>
                            </div>
                            <div class="bg-white p-6 rounded-lg shadow">
                                <h4 class="text-xl font-bold mb-4">ğŸ“‹ PrÃ³ximas Actividades</h4>
                                <div id="activitiesList" class="space-y-3 max-h-96 overflow-y-auto">
                                    ${generateActivitiesList()}
                                </div>
                            </div>
                        </div>
                    `;
                    break;
                    
                case 'ratings':
                    content.innerHTML = `
                        <h3 class="text-2xl font-bold text-azul-institucional mb-6">â­ Calificaciones de Padres</h3>
                        <div class="bg-white p-6 rounded-lg shadow">
                            <div id="ratingsList">
                                ${generateRatingsList()}
                            </div>
                        </div>
                    `;
                    break;
            }
        }

        // Secciones de profesor
        function showTeacherSection(section) {
            const content = document.getElementById('teacherContent');
            
            switch(section) {
                case 'grades':
                    content.innerHTML = `
                        <h3 class="text-2xl font-bold text-azul-institucional mb-6">ğŸ“ Ingresar Notas</h3>
                        <div class="bg-white p-6 rounded-lg shadow">
                            <form onsubmit="saveGrades(event)">
                                <div class="grid md:grid-cols-2 gap-4 mb-4">
                                    <select id="gradeStudent" class="p-3 border rounded-lg" required>
                                        <option value="">Seleccionar estudiante</option>
                                        ${generateStudentOptions()}
                                    </select>
                                    <select id="gradeSubject" class="p-3 border rounded-lg" required>
                                        <option value="">Seleccionar materia</option>
                                        ${generateSubjectOptions()}
                                    </select>
                                </div>
                                <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-4">
                                    <div>
                                        <label class="block text-sm font-semibold mb-1">Asistencia (30%)</label>
                                        <input type="number" id="gradeAttendance" min="0" max="100" class="w-full p-3 border rounded-lg" required>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-semibold mb-1">Cuaderno (20%)</label>
                                        <input type="number" id="gradeNotebook" min="0" max="100" class="w-full p-3 border rounded-lg" required>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-semibold mb-1">Trabajo (25%)</label>
                                        <input type="number" id="gradeWork" min="0" max="100" class="w-full p-3 border rounded-lg" required>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-semibold mb-1">EvaluaciÃ³n (25%)</label>
                                        <input type="number" id="gradeEvaluation" min="0" max="100" class="w-full p-3 border rounded-lg" required>
                                    </div>
                                </div>
                                <button type="submit" class="w-full bg-blue-500 hover:bg-blue-600 text-white p-3 rounded-lg font-semibold">Guardar Notas</button>
                            </form>
                        </div>
                    `;
                    break;
                    
                case 'attendance':
                    content.innerHTML = `
                        <h3 class="text-2xl font-bold text-azul-institucional mb-6">âœ… Control de Asistencia</h3>
                        <div class="bg-white p-6 rounded-lg shadow">
                            <div class="mb-4">
                                <input type="date" id="attendanceDate" class="p-3 border rounded-lg mr-4" value="${new Date().toISOString().split('T')[0]}">
                                <button onclick="loadAttendance()" class="bg-blue-500 hover:bg-blue-600 text-white px-6 py-3 rounded-lg">Cargar Lista</button>
                            </div>
                            <div id="attendanceList">
                                ${generateAttendanceList()}
                            </div>
                        </div>
                    `;
                    break;
                    
                case 'students':
                    content.innerHTML = `
                        <h3 class="text-2xl font-bold text-azul-institucional mb-6">ğŸ‘¥ Mis Estudiantes</h3>
                        <div class="bg-white p-6 rounded-lg shadow">
                            <div class="grid gap-4">
                                ${generateMyStudentsList()}
                            </div>
                        </div>
                    `;
                    break;
            }
        }

        // Secciones de padres
        function showParentSection(section) {
            const content = document.getElementById('parentContent');
            
            switch(section) {
                case 'grades':
                    content.innerHTML = `
                        <h3 class="text-2xl font-bold text-azul-institucional mb-6">ğŸ“Š Notas de ${currentUser.name}</h3>
                        <div class="bg-white p-6 rounded-lg shadow">
                            ${generateGradesReport()}
                        </div>
                    `;
                    break;
                    
                case 'attendance':
                    content.innerHTML = `
                        <h3 class="text-2xl font-bold text-azul-institucional mb-6">ğŸ“… Asistencia de ${currentUser.name}</h3>
                        <div class="bg-white p-6 rounded-lg shadow">
                            <div class="text-center">
                                <div class="text-6xl mb-4">${currentUser.attendance >= 90 ? 'ğŸ˜Š' : currentUser.attendance >= 80 ? 'ğŸ˜' : 'ğŸ˜Ÿ'}</div>
                                <h4 class="text-3xl font-bold text-azul-institucional mb-2">${currentUser.attendance}%</h4>
                                <p class="text-lg text-gray-600">Asistencia general</p>
                                <div class="mt-6 p-4 ${currentUser.attendance >= 90 ? 'bg-green-100 text-green-800' : currentUser.attendance >= 80 ? 'bg-yellow-100 text-yellow-800' : 'bg-red-100 text-red-800'} rounded-lg">
                                    ${currentUser.attendance >= 90 ? 'Â¡Excelente asistencia! ğŸ‰' : currentUser.attendance >= 80 ? 'Buena asistencia, puede mejorar ğŸ‘' : 'Asistencia baja, necesita mejorar âš ï¸'}
                                </div>
                            </div>
                        </div>
                    `;
                    break;
            }
        }

        // Funciones auxiliares para generar contenido
        function generateStudentsList() {
            return systemData.students.map(student => `
                <div class="flex justify-between items-center p-3 bg-gray-50 rounded-lg">
                    <div>
                        <p class="font-semibold">${student.name}</p>
                        <p class="text-sm text-gray-600">Grado: ${student.grade} | Doc: ${student.id}</p>
                        <p class="text-xs text-blue-600">Usuario: ${student.id} | ContraseÃ±a: ${student.id}</p>
                    </div>
                    <button onclick="removeStudent('${student.id}')" class="bg-red-500 hover:bg-red-600 text-white px-3 py-1 rounded text-sm">
                        ğŸ—‘ï¸ Eliminar
                    </button>
                </div>
            `).join('');
        }

        function generateTeachersList() {
            return systemData.teachers.map(teacher => `
                <div class="flex justify-between items-center p-3 bg-gray-50 rounded-lg">
                    <div>
                        <p class="font-semibold">${teacher.name}</p>
                        <p class="text-sm text-gray-600">ID: ${teacher.id} | Materias: ${teacher.subjects.join(', ')}</p>
                        <p class="text-xs text-blue-600">Usuario: ${teacher.id} | ContraseÃ±a: ${teacher.password}</p>
                    </div>
                    <button onclick="removeTeacher('${teacher.id}')" class="bg-red-500 hover:bg-red-600 text-white px-3 py-1 rounded text-sm">
                        ğŸ—‘ï¸ Eliminar
                    </button>
                </div>
            `).join('');
        }

        function generateActivitiesList() {
            return systemData.schedule.map(activity => `
                <div class="p-4 bg-gray-50 rounded-lg">
                    <div class="flex justify-between items-start">
                        <div>
                            <h5 class="font-semibold text-azul-institucional">${activity.title}</h5>
                            <p class="text-sm text-gray-600">ğŸ“… ${activity.date} - â° ${activity.time}</p>
                            <p class="text-sm mt-2">${activity.description}</p>
                        </div>
                        <button onclick="removeActivity(${activity.id})" class="bg-red-500 hover:bg-red-600 text-white px-2 py-1 rounded text-xs">
                            ğŸ—‘ï¸
                        </button>
                    </div>
                </div>
            `).join('');
        }

        function generateRatingsList() {
            if (systemData.ratings.length === 0) {
                return '<p class="text-center text-gray-600">No hay calificaciones aÃºn</p>';
            }
            
            const avgRating = systemData.ratings.reduce((sum, r) => sum + r.rating, 0) / systemData.ratings.length;
            
            return `
                <div class="text-center mb-6">
                    <h4 class="text-2xl font-bold text-azul-institucional">CalificaciÃ³n Promedio: ${avgRating.toFixed(1)} â­</h4>
                    <p class="text-gray-600">Basado en ${systemData.ratings.length} calificaciones</p>
                </div>
                <div class="space-y-4">
                    ${systemData.ratings.map(rating => `
                        <div class="p-4 bg-gray-50 rounded-lg">
                            <div class="flex items-center mb-2">
                                <span class="text-yellow-500">${'â­'.repeat(rating.rating)}</span>
                                <span class="ml-2 text-sm text-gray-600">${rating.date}</span>
                            </div>
                            <p class="text-gray-700">${rating.comment}</p>
                        </div>
                    `).join('')}
                </div>
            `;
        }

        function generateStudentOptions() {
            return systemData.students.map(student => 
                `<option value="${student.id}">${student.name} - ${student.grade}</option>`
            ).join('');
        }

        function generateSubjectOptions() {
            const subjects = ['EspaÃ±ol', 'MatemÃ¡ticas', 'BiologÃ­a', 'Sociales', 'ArtÃ­stica', 'ReligiÃ³n', 'Danzas', 'MÃºsica', 'TecnologÃ­a', 'OrtografÃ­a', 'ComprensiÃ³n Lectora', 'InglÃ©s', 'EducaciÃ³n FÃ­sica'];
            return subjects.map(subject => 
                `<option value="${subject}">${subject}</option>`
            ).join('');
        }

        function generateAttendanceList() {
            return systemData.students.map(student => `
                <div class="flex justify-between items-center p-3 bg-gray-50 rounded-lg mb-2">
                    <span class="font-semibold">${student.name}</span>
                    <div class="flex gap-2">
                        <label class="flex items-center">
                            <input type="radio" name="attendance_${student.id}" value="present" class="mr-2" checked>
                            âœ… Presente
                        </label>
                        <label class="flex items-center">
                            <input type="radio" name="attendance_${student.id}" value="absent" class="mr-2">
                            âŒ Ausente
                        </label>
                    </div>
                </div>
            `).join('');
        }

        function generateMyStudentsList() {
            return systemData.students.map(student => `
                <div class="p-4 bg-gray-50 rounded-lg">
                    <h5 class="font-semibold text-azul-institucional">${student.name}</h5>
                    <p class="text-sm text-gray-600">Grado: ${student.grade} | Documento: ${student.id}</p>
                    <p class="text-sm text-gray-600">Padre/Madre: ${student.parent}</p>
                </div>
            `).join('');
        }

        function generateGradesReport() {
            const grades = currentUser.grades;
            let html = '<div class="space-y-4">';
            
            for (const [subject, scores] of Object.entries(grades)) {
                const finalGrade = (scores.asistencia * 0.3 + scores.cuaderno * 0.2 + scores.trabajo * 0.25 + scores.evaluacion * 0.25).toFixed(1);
                const gradeColor = finalGrade >= 90 ? 'text-green-600' : finalGrade >= 80 ? 'text-yellow-600' : 'text-red-600';
                
                html += `
                    <div class="p-4 bg-gray-50 rounded-lg">
                        <div class="flex justify-between items-center mb-2">
                            <h5 class="font-semibold text-azul-institucional">${subject}</h5>
                            <span class="text-2xl font-bold ${gradeColor}">${finalGrade}</span>
                        </div>
                        <div class="grid grid-cols-2 md:grid-cols-4 gap-2 text-sm">
                            <div>Asistencia: ${scores.asistencia}</div>
                            <div>Cuaderno: ${scores.cuaderno}</div>
                            <div>Trabajo: ${scores.trabajo}</div>
                            <div>EvaluaciÃ³n: ${scores.evaluacion}</div>
                        </div>
                    </div>
                `;
            }
            
            html += '</div>';
            return html;
        }

        // Sistema de calificaciones
        function setRating(stars) {
            selectedRating = stars;
            const starElements = document.querySelectorAll('.rating-star');
            starElements.forEach((star, index) => {
                if (index < stars) {
                    star.classList.remove('text-gray-400');
                    star.classList.add('text-yellow-500');
                } else {
                    star.classList.remove('text-yellow-500');
                    star.classList.add('text-gray-400');
                }
            });
        }

        // Funciones de utilidad
        function openWhatsApp() {
            window.open('https://wa.me/573130000000', '_blank');
        }

        function openLocation() {
            window.open('https://maps.google.com/?q=Carrera+13+8-48+CallejÃ³n+Betania+Villagorgona+Candelaria', '_blank');
        }

        function logout() {
            currentUser = null;
            currentUserType = null;
            showWelcome();
        }

        // InicializaciÃ³n
        document.addEventListener('DOMContentLoaded', function() {
            syncData();
            showWelcome();
        });
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'97b126385226f78a',t:'MTc1NzE5NTA4My4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
